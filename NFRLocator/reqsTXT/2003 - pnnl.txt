PNNL-14382

Task Report for the Energy Efficient and
Affordable Small Commercial and Residential
Buildings Research Program

Project 2.5 - Pattern-Recognition Based
Fault Detection and Diagnostics
Automated Diagnostics Software
Requirements Specification Version 1.1
D.R. Sisk
M. R. Brambley

T. A. Carlon
R. S. Briggs

August 2003

Prepared for the U.S. Department of Energy
under Contract DE-AC06-76RL01830

DISCLAIMER
This report was prepared as an account of work sponsored by an agency of the
United States Government. Neither the United States Government nor any
agency thereof, nor Battelle Memorial Institute, nor any of their employees,
makes any warranty, express or implied, or assumes any legal liability or
responsibility for the accuracy, completeness, or usefulness of any
information, apparatus, product, or process disclosed, or represents that
its use would not infringe privately owned rights. Reference herein to any
specific commercial product, process, or service by trade name, trademark,
manufacturer, or otherwise does not necessarily constitute or imply its
endorsement, recommendation, or favoring by the United States Government
or any agency thereof, or Battelle Memorial Institute. The views and opinions
of authors expressed herein do not necessarily state or reflect those of the
United States Government or any agency thereof.
PACIFIC NORTHWEST NATIONAL LABORATORY
operated by
BATTELLE
for the
UNITED STATES DEPARTMENT OF ENERGY
under Contract DE-AC06-76RL01830

Printed in the United States of America
Available to DOE and DOE contractors from the
Office of Scientific and Technical Information,
P.O. Box 62, Oak Ridge, TN 37831-0062;
ph: (865) 576-8401
fax: (865) 576-5728
email: reports@adonis.osti.gov
Available to the public from the National Technical Information Service,
U.S. Department of Commerce, 5285 Port Royal Rd., Springfield, VA 22161
ph: (800) 553-6847
fax: (703) 605-6900
email: orders@ntis.fedworld.gov
online ordering: http://www.ntis.gov/ordering.htm

This document was printed on recycled paper.
(8/00)

Final Report for the Energy Efficient and
Affordable Small Commercial and Residential
Buildings Research Program
Project 2.5 – Pattern-Recognition based Fault
Detection and Diagnostics
Automated Diagnostics Software Requirements
Specification
Version 1.1

D. R. Sisk
M. R. Brambley
T. A. Carlon
R. S. Briggs

August 2003

Prepared for
the U.S. Department of Energy
under Contract DE-AC06-76RL01830

Pacific Northwest National Laboratory
Richland, Washington 99352

iii

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

Revision History
Date

Version

Description

Author

7/31/2002

1.0

Initial version

DR Sisk, MR Brambley,
TA Carlon, RS Briggs

8/30/2003

1.1

Revised version with Boiler Diagnostics

DR Sisk, MR Brambley,
TA Carlon, RS Briggs

Battelle Northwest, 2003

Page iii

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Battelle Northwest, 2003

Version:
1.1
Date: 8/28/2003

Page iv

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

Table of Contents
1.

2.

3.

Introduction

1

1.1
1.2
1.3
1.4
1.5

1
1
1
3
3

Overall Description

4

2.1
2.2
2.3
2.4
2.5

4
5
6
6
7
7

Product Perspective
Product Functions
User and Environment Characteristics
General Constraints
Use-Case Model Survey
2.5.1 Introduction

Requirements
3.1

3.2

3.3
3.4
3.5
3.6
3.7
4.

Purpose
Scope
Definitions, Acronyms and Abbreviations
References
Overview

8

Use-Case Specifications
3.1.1 Start and Stop Diagnostics Use Case
3.1.2 Browse Current Diagnostics Use Case
3.1.3 Browse Historical Diagnostics Use Case
3.1.4 Configure Diagnostics Use Case
3.1.5 Authenticate User
Functionality
3.2.1 General
3.2.2 Preprocessing
3.2.3 Diagnostic Process
3.2.4 Output Processing
Usability
3.3.1 User Interface
Supportability
3.4.1 Error Reporting
Interfaces
3.5.1 User Interfaces
Security
Other Requirements

Appendix A: Data Flow Diagrams of Diagnostic Processes for Chillers, Cooling Towers, and
Chilled-Water Distribution

9
9
11
12
14
15
16
16
16
19
30
30
30
31
31
31
31
38
38

39

5.

Appendix B: Chiller, Cooling Tower, and Chilled-Water Distribution Data Dictionary

122

6.

Appendix C: Data Flow Diagrams for Boiler Diagnostic Processes

139

7.

Appendix D: Data Dictionary for Boilers

163

Battelle Northwest, 2003

Page v

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
1.

Introduction
This document specifies requirements for a computerized automated diagnostic tool for the detection of
faults in certain heating, ventilation, and air-conditioning (HVAC) system components. The automated
diagnostic tool is being developed for Architectural Energy Corporation (AEC) by Battelle as part of a
program sponsored by the California Energy Commission (CEC). Supplemental cost-share funds are
provided by U.S. Department of Energy through the Pacific Northwest National Laboratory (PNNL).

1.1

Purpose
This Requirements Specification (RS) specifies the essential capabilities required of the automated
diagnostic tool. The purpose of this document is to clarify for AEC, the California Energy Commission
(CEC), the Office of Buildings Programs, Office of Energy Efficiency and Renewable Energy (EERN) of
the U.S. Department of Energy, and the project team the results that must be achieved by the automated
diagnostic tool. Any illustrative model presented in this document is used solely to explain the
requirements and is NOT intended to address design or implementation issues.

This SRS also specifies key AEC, CEC, and EERN requirements for project deliverables, including
documentation.
1.2

Scope
The automated diagnostic tool detects and identifies faults in chillers and cooling tower subsystems of
HVAC units using sensed data acquired from the unit, unit specifications, unit installation and
configuration data, and unit operation data (such as schedules). The tool is a software product that will be
utilized primarily by building operators and facilities managers and only secondarily by HVAC service
technicians, energy service providers, and operation supervisors. Building operators will use the tool to
monitor units for which they are responsible, perhaps monitoring from a central control room within the
building. Service technicians will utilize the product on site during repair and maintenance visits or off site
between visits. Energy service providers, responsible for a number of customers and facilities, will use the
product to monitor a number of units remotely, possibly in many different buildings, checking for
inefficiencies and problems requiring dispatch of service personnel. Finally, building operator supervisors
will use the tool to guide decisions on the assignment of operators and prioritization of work. The tool will
provide the user with a visual indication of faults, descriptive information concerning the faults and their
causes, and suggested corrective actions. The tool will store the results of diagnostics for subsequent
retrieval and use.

The software require ments described in this document are applicable to HVAC systems and associated
subsystems. Such subsystems can include chillers, cooling towers, and boilers. However, the initial
version of the tool will focus on diagnostics for chillers and cooling towers only. The tool will automate
diagnostic processes hitherto performed through a visual analysis of graphical data by a human expert.

The “Product Overview” section describes factors that affect the software and its requirements. The
“Concept Example” appendix describes how the software would function in an example situation.
1.3

Definitions, Acronyms and Abbreviations
Some of the following definitions are taken or adapted from IEEE Std 610.12-1990 (IEEE 1993a) and
IEEE Std 830-1984 (IEEE 1993b).

Battelle Northwest, 2003

Page 1

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

Authenticate — the process by which the tool establishes the identity and privileges of the user by
obtaining an identifier and password from the user and checking it against a database of predefined users.
The user becomes authenticated when the identifier and password match one of the predefined users in the
tool’s database.

component — one of the parts that make up a software system. A component may be subdivided into other
components [IEEE Std 610.12-1990]. Note: For the purpose of this specification, the term “component”
will be used in preference to the term “module”

diagnostic result — the output of the diagnostic processing. This can either be an identified fault
condition or the confirmation of the absence of a fault condition.

fixed data — data describing the characteristics of the unit under diagnosis, for example, specifications and
design information, operating characteristics, set points, installation and configuration data, and operation
data (such as schedules) that do not change on a regular basis.

functional requirement — a requirement that specifies a function that a software system or software
component must be able to perform [IEEE Std 610.12-1990]. In this requirements specification, functional
requirements specify how the inputs to the software product should be transformed into outputs [IEEE Std
830-1984].

interface requirement — a requirement that specifies an external item with which a software system or
software component must interact, or that sets forth constraints on formats, timing, or other factors caused
by such an interaction [IEEE Std 610.12-1990]

module — see component

product — (for this document) a software system or software component−along with any necessary data
and documentation−for which requirements are specified in a requirements specification

requirement — (1) a condition or capability needed by a customer to solve a problem or achieve an
objective; (2) a condition or capability that must be met or possessed by a software system or software
component to satisfy a contract, standard, specification, or other formally imposed document; (3) a
documented representation of a condition or capability as in (1) or (2) [adapted from IEEE Std 610.121990]

requirements specification (RS) — a document of the essential requirements (functions, design
constraints, and attributes) of the software and/or hardware and their external interfaces [adapted from
IEEE Std 610.12-1990]

RS — requirements specification
Battelle Northwest, 2003

Page 2

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

Sensed data — data that are measured through electronic or mechanical detection. Typically this data
varies at such a rate, e.g., in real time, hourly, daily, weekly, or is otherwise difficult to estimate or model
such that an accurate characterization of it can only be gained through such detection. This data includes
temperatures, pressures, electrical current, machine state, etc.

software system — a collection of software components related in such a way as to produce a result
greater than what their parts, separately, could produce

subsystem — a discrete part of an HVAC system, e.g., chiller or cooling tower.

unit — a complete HVAC system

usability — the ease with which a user can learn to operate, prepare inputs for, and interpret outputs of a
software system or software component [IEEE Std 610.12-1990].

1.4

References
The following are references supporting these specifications:

1.5

Overview
Product Overview -- This section provides a descriptive overview of the automated diagnostic tool, its
users and operating environment, and general factors that affect requirements. It lays the foundation for
understanding the specific requirements that follow.

Specific requirements are specified in the following categories:

Category
Overall
Description
Functional
Requirements
External
Interface
Requirements

Security
Requirements
Other
Requirements

Descriptions
An overview of the expected product use and
context including user characteristics, constraints,
and assumptions.
describes the core capability and operating
characteristics required of the diagnostic tool by
the client.
includes general user interface requirements and
logical characteristics of interfaces between the
automated diagnostic tool, data acquisition
system, and data storage system. Specific user
interface requirements are being developed
independently as part of the Phase A Prototype.
specifies requirements for safeguarding customer
data
includes special operations required by end users,
and documentation requirements specified by the
client.

Battelle Northwest, 2003

Page 3

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Appendix A: Data Flow Diagrams of Diagnostic Processes for Chillers, Cooling Towers and Chilled
Water Distribution provides diagrams showing the data flows and data-processing that lead from fixed
data and sensed data to diagnostic conclusions.

Appendix B: Data Dictionary for Chillers, Cooling Towers and Chilled Water Distribution provides a
tabular listing of known system data corresponding to their use in Appendix A.

Appendix C: Data Flow Diagrams for Basic Boiler Diagnostics provides diagrams and mini-specs
showing data flows and data processing that lead from fixed data and sensed data to diagnostic conclusions.

Appendix D; Data Dictionary for Boilers provides a tabular listing of all known system data elements
corresponding to their use in Appendix C.

2.

Overall Description
The following overview of the automated diagnostic tool supplies context for the specific requirements
presented in later sections. The purpose of this information is to make the specific requirements easier to
understand. All specific requirements are numbered in later sections.

2.1

Product Perspective
Currently, diagnostics on HVAC units and subsystems are performed largely on a manual basis. Sensed
data, e.g., temperatures and pressures, are obtained from one or more data acquisition devices. These
devices measure and store sensed data over periods of several days to several weeks. Prior to the
diagnostic process, data from these devices is input to graphical display software for visual inspection by a
human expert. The expert, relying on technical expertise and results of previous diagnostic experience,
evaluates the condition of the unit and subsystems based on visual plots of the data. This process is
depicted in Figure 1.
Fixed Data

Sensed Data
Data Acquisition
Devices (DADs)

Data Visualization
Software

Automatic and userdefined plots

(e.g. Enforma
Software)

DADs
(e.g. AEC
Micrologger)

Diagnostic
process
Manual visual
diagnostics
process

Sensed Data
Preprocessing
Output
process

Diagnostic
results
Client

Figure 1. Current HVAC Diagnostic Process
Battelle Northwest, 2003

Page 4

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

The process depicted in Figure 1 can be partitioned into three logical components. These components are
delineated in the diagram by dashed lines and are the data-preprocessing component, the diagnostic
component, and output component. The diagnostic tool described in this document will replace the current
process with an automated one based on algorithms derived from expert practices. These algorithms
operate without the need for data visualization or human expert input. Diagnostic results will be displayed
to the user and stored for subsequent retrieval and analysis. For the purposes of this document, the
automated diagnostic tool will be assumed to preserve the logical construction of the current process. This
construction is depicted in Figure 2.

Preprocessing
Filtering,
Averaging, etc.
Diagnostic
Process

Output
Processing

Figure 2. Logical Construction of HVAC Diagnostic Process

2.2

Product Functions
As previously stated, the functionality of the automated diagnostic tool can be partitioned into three logical
components: the data preprocessing component, the diagnostic component, and the output component.

The data-preprocessing component obtains data describing the subsystem under diagnosis and reduces,
filters, and otherwise prepares the data for input to the diagnostic component. This data includes sensed
data, e.g., temperatures, pressures, electrical current, machine state, etc., as well as fixed data describing the
characteristics of the subsystem under diagnosis, for example, specifications and design information,
operating characteristics and set points, etc. The data may be processed through averaging, trending, or
other statistical analysis. Sensed data can originate from data acquisition hardware either in real time or at
some arbitrary time after acquisition. Fixed data will generally be compiled prior to operation of the
diagnostic tool and be obtained from permanent storage when needed. Specific requirements will be placed
on the data-preprocessing component only with respect to types of data to be input and the format and
interface requirements of this input. However, the component is described here to provide insight into the
operation of the software.
The diagnostic component will detect and identify faults in the operation of HVAC subsystems based on
sensed and fixed data input from the data-preprocessing component. The diagnostic algorithms used for
fault detection will be derived from current expert practices by AEC. The faults identified by the
Battelle Northwest, 2003

Page 5

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

diagnostic will be enumerated and described under the functional requirements section.
The output component will display and record results output from the diagnostic component. The results of
the diagnostics will be displayed to the user in a simple, graphical and textual format. The results will also
be stored to permanent storage for subsequent retrieval and analysis.
2.3

User and Environment Characteristics
As previously stated, users of the automated diagnostic tool will include service technicians, energy service
providers, building operators, and building operator supervisors. Installed platforms could include portable
computers, handheld devices, and personal workstations in control rooms and offices. Installed platforms
may communicate with the HVAC unit under diagnosis using wireless interfaces, direct point-to-point
connections, or over Internet or local area network. Platform operating systems will be initially restricted
to Microsoft Windows-compatible systems.

The computer expertise of the user base could vary over a wide range. Some users could be quite
sophisticated, others familiar with only the most rudimentary computer-based tasks. However, it is
expected that all users will have a good fundamental understanding of HVAC units. Setting up and
operating the automated diagnostic tool should require minimal user input.

Service technicians are expected to use the software as often as their service tasks dictate, perhaps several
times a day for periods up to about one hour, in close proximity to the HVAC unit and possibly out of
doors. They may also set up the diagnostic tool to collect data continuously offsite at their offices and
inspect the data periodically to identify faults or confirm proper operation. Building operators are expected
to use the software on an occasional basis every day. The tool would collect data and process it
continuously but the operators would only check the results periodically. They may view results for only a
few seconds to check the status of equipment while passing through a control room or may sit at a monitor
for several minutes more carefully inspecting the diagnostic results and other information available on the
tool’s display. Energy service providers and building operator supervisors could potentially use the
software in a more continuous mode, allowing it to operate undisturbed for many hours or days to record
diagnostic results over a period of time.

See the “Concept Example” appendix for a detailed example of how the automated diagnostic tool will be
used.
2.4

General Constraints
The automated diagnostic tool must support a wide variety of users with respect to computer expertise. In
addition, different users will have different expectations for the tool with respect to data presentation and
functionality. For instance, some users will simply require an immediate diagnostic result while other users
may be interested in diagnostic results generated over an arbitrary time that can be subsequently reviewed.

The tool must provide a capability to manually input and edit “fixed” data, i.e., data that does not vary in
real-time. Such data includes HVAC unit set points, specifications, and configuration information. This
data must be stored for subsequent use by the diagnostic tool for review and verification by other users and
management. The tool should provide for configuration management of fixed data.

Battelle Northwest, 2003

Page 6

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

The user must have the capability to configure the tool for continuous diagnostic analysis over an indefinite
period of time. In this mode, the tool will record diagnostic results for subsequent review. No printed
reports will be required of the tool, but the tool must print screen images of diagnostic results and historical
data at user request and must provide long term storage of diagnostic results and permit the user to supply
metadata relevant to the results, e.g., location, HVAC serial number, model number, user name, date, etc.

The tool will not provide capability for additional user-defined analysis of the diagnostic results, results
will be provided in a simple, final, definitive manner. However, the tool may provide the user the
capability to adjust the sensitivity of the diagnostic algorithms to increase the probability of exposing
typically undetected diagnostic events or concealing detected diagnostic events (including false detections).

The tool will be capable of obtaining sensed data from a variety of sources. Such sources should include
real-time data acquisition devices and data files containing previously acquired data.

The current version of the tool will include diagnostic algorithms for cooling tower and chiller subsystems
of HVAC units. However, the design of the software should support the incorporation of diagnostic
algorithms for additional HVAC subsystems. In addition, the tool should support modification or
replacement of existing diagnostic algorithms.
The automated diagnostic tool will be restricted to Microsoft Windows-compatible operating systems.

2.5

Use -Case Model Survey
This section provides an overview of the use case model that describes the operation of the user interface.
Actual use cases that specifically define the operation of the user interface are presented in the
requirements section.

2.5.1

Introduction
The use case model consists of five use cases as depicted in Figure 3. The main actor in the use case model
is the human user. This actor is generalized as “User”. The User can be further specified as a general user
or administrator. The general user has no ability to modify system settings. The admin istrator user is able
to modify certain settings. The use case “Start and Stop Diagnostics” describes the process by which the
administrator user activates and ceases diagnostic processing. The use case “Browse Current Diagnostics”
describes the process by which the user views current diagnostic results. The use case “Browse Historical
Diagnostics” describes the process by which the user views historical diagnostic results. The use case
“Configure Diagnostics” describes the process by which the administrator user adjusts diagnostic
parameters used in the diagnostic process. The use case “Authenticate User” describes the process by
which the user makes known to the tool the privileges to which they are entitled.

Battelle Northwest, 2003

Page 7

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Automated Diagnostic

Browse
Historical
Diagnostics

Browse
Current
Diagnostics
User

Start/Stop
Diagnostic

<<include>>

Authenticate
User
Configure
Diagnostics
General User

<<include>>

Administrator

Figure 3. Use Case Model

3.

Requirements
The requirements in this document are organized according to the categories listed in Table 1.

Table 1. Categories of Software Requirements

Requirement Category

General Description and Purpose

Use-Case Specifications

specify, in terms of use cases, the expected interactions and behavior of the software
with respect to the defined actors.

Functionality

specify functions that a system or component must be able to perform — the
fundamental software actions that transform inputs into outputs

Battelle Northwest, 2003

Page 8

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

Usability

specify factors affecting how easily users can learn to operate a system or
component, prepare its inputs, and interpret its outputs

Supportability

include requirements affecting how easily a system or component can be maintained
to meet its original requirements or extended to meet modified requirements

Interfaces

specify requirements for user, hardware, software, and communication interfaces, as
applicable.

Security

specify needs for protecting the software from accidental or malicious access, use,
modification, destruction, or disclosure

Other Requirements

include special requirements that do not fit into previous categories

3.1

Use -Case Specifications
This section describes the fi ve main use cases describing the functionality of the user interface.
These use cases are “Start and Stop Diagnostics”, “Browse Current Diagnostics”, “Browse
Historical Diagnostics”, “Configure Diagnostics”, and “Authenticate User”. The use cases “Start
and Stop Diagnostics” and “Configure Diagnostics” include the use case “Authenticate User”.

3.1.1

Start and Stop Diagnostics Use Case

3.1.1.1 Brief Description
This use case provides the actor the means to start and stop diagnostic processing. The actor in
this case is the administrator user (see 2.5.1).
3.1.1.2 Flow of Events
The use case begins just prior to when the user launches the application.
3.1.1.2.1

Basic Flow – Start Diagnostics
1.
2.

3.
4.

5.

6.

The user launches the tool by double-clicking the icon
associated with the tool or typing the application’s name.
The tool momentarily displays a splash screen
identifying the tool, identifying developing and
sponsoring organizations as appropriate, and listing
copyright information.
The tool displays the main window of the tool.
The user starts the diagnostic processing by selecting a
menu item named “Start Diagnostics” from a drop down
menu named “Status”.
Include (Authenticate User). If the user has the
appropriate privilege (i.e., the user is the administrator
user) the tool requests a confirmatory response from the
user to start the diagnostic processing.
If the user confirms the desire to start diagnostic
processing, the tool starts the processing and displays

Battelle Northwest, 2003

Page 9

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

an animated indication that diagnostic processing is
active.
7. If the user responds negatively to the confirmation, the
tool does not start the diagnostic processing but the user
remains authenticated.
8. If the user does not have the appropriate privilege, the
tool does not start the diagnostic processing.
9. The user secures the tool by selecting a menu item
named “Logout” from the drop down menu named “File”.
10. The tool returns the current user’s privileges to those of
the general user.
11. If a period of 15 minutes elapses whereby the user does
not secure the tool, the users privileges will automatically
revert to those of a general user.
3.1.1.2.2

3.1.1.2.2.1

Alternative Flow

Stopping Diagnostic Processing
1.

2.

3.
4.

5.

6.

7.

The user can stop diagnostic processing at any time
after the diagnostic processing has started by selecting
the “Stop Diagnostics” menu item from the main menu
entitled “Status”.
If the user is not authenticated as the administrator user,
include (Authenticate User) to validate privileges for
stopping diagnostic processing.
If the user has the appropriate privilege, the tool
requests confirmation to stop diagnostic processing.
If the user responds positively to the confirmation, the
tool stops diagnostic processing and indicates the
stopped condition. Otherwise the software performs no
function but the user remains authenticated.
If the user selects the “Exit” menu item from the main
menu entitled “File” and the diagnostic processing is not
active, the tool exits.
If the user selects “Exit” and the diagnostic processing is
active, include (Authenticate User), if the user is not
already validated, to verify the user’s privilege to stop
diagnostic processing.
If the user is permitted to stop diagnostic processing, the
tool stops the processing and exits. Otherwise, the
software performs no function.

3.1.1.3 Special Requirements
There are no special requirements for this use case.
3.1.1.4 Preconditions
There are no preconditions for this use case.

Battelle Northwest, 2003

Page 10

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.1.1.5 Postconditions
There are no postconditions for this use case.
3.1.1.6 Extension Points
There are no extension points for this use case.
3.1.2

Browse Current Diagnostics Use Case

3.1.2.1 Brief Description
This use case provides the actor the means to view current diagnostic results. The actor in this
case is the user (see 2.5.1).
3.1.2.2 Flow of Events
The use case begins with the tool executing and displaying a list of buildings under diagnosis on
the main (initial) window.
3.1.2.2.1

Basic Flow – Browse Current Diagnostics
1.
2.
3.
4.
5.
6.
7.

3.1.2.2.2

The tool displays the main (initial) window, listing
buildings under diagnosis.
The user selects a building of interest.
The tool displays the subsystems window, tiled on top
the main (initial) window.
The user selects a subsystem of interest.
The tool displays the condition window, tiled on top the
subsystems window.
The user selects a diagnostic of interest.
The tool displays the diagnostic information window for
that diagnostic.

Alternative Flow
1.

2.

3.
4.

At any window except the initial window, the user may
click the “Back” button to dismiss the current window and
re-establish the previous window as the current window.
The user may then make a new selection.
The user may click a button labeled “Print” on the
diagnostic information window to print an image of the
window.
The tool displays a window listing possible items to print
including the diagnostic information window.
The user selects the diagnostic information window and
clicks the “OK” button to print the window.

3.1.2.3 Special Requirements
There are no special requirements for this use case.
3.1.2.4 Preconditions
There are no preconditions for this use case.

Battelle Northwest, 2003

Page 11

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.1.2.5 Postconditions
The diagnostic processing will not cease or be negatively impacted during the activities of this
use case.
3.1.2.6 Extension Points
There are no extension points for this use case.
3.1.3

Browse Historical Diagnostics Use Case

3.1.3.1 Brief Description
This use case provides the actor the means to view historical diagnostic results. The actor in this
case is the user (see 2.5.1).
3.1.3.2 Flow of Events
The use case begins with the tool displaying the diagnostic information window, itself displaying a
description of a diagnostic of interest.
3.1.3.2.3

Basic Flow – Browse Historical Diagnostics
1.
2.

3.
4.

5.
6.

3.1.3.2.4

3.1.3.2.4.1

Alternative Flows

Changing the Viewing Period
1.
2.

3.1.3.2.4.2

The user clicks the “History” button.
The tool displays the diagnostic history window depicting
the historical results of the selected condition of interest
over the default viewing period in the form of a color
map. The window provides a scroll bar for scrolling
through historical results if data are available prior to the
default viewing period. The default viewing period
extends backward one week prior to the current date.
Sliding the scroll bar does not change the viewing period
displayed. The default time resolution for the window is
one hour.
The user slides the scroll bar backward or forward to
view previous results up to the current time.
The tool displays the results within a viewing period of
one week, adding results to the beginning or ending of
the period while dropping results of the opposite end.
The tool does not change the viewing period.
The user may close the diagnostic history window by
clicking the “Close” button.
The tool dismisses the diagnostic history window and the
diagnostic information window and makes the condition
window the current window.

The user selects a new viewing period from a list of
periods provided by the tool.
The tool redisplays the historically data over the new
viewing period.

Zooming
1.

The user selects a period of time within the displayed
viewing period over which to expand or contract in time.

Battelle Northwest, 2003

Page 12

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003
2.

3.1.3.2.4.3

The user double-clicks a cell in the history window.
The tool dismisses the current diagnostic information
window if displayed. After a noticeable delay of
approximately one second, the tool displays the
diagnostic information window associated with the cell
selected.

Browsing Arbitrary History Intervals
1.
2.

3.1.3.2.4.5

The tool expands or contracts the selected period. If
expanding, the selected period becomes the new
viewing period. If contracting, the new viewing period
becomes twice as long as the selected period and
encloses it.

Displaying Historical Diagnostic Information
1.
2.

3.1.3.2.4.4

Version:
1.1
Date: 8/28/2003

The user specifies a start time and end time for an
historical interval of interest using calendar controls.
The tool displays historical results beginning with the first
result on or after the specified start time up to the end
time. The view is confined to the previously selected
viewing period.

General Alternative Flows
1.

2.

3.

4.

At the diagnostic information window, the user may click
the “Close” button to dismiss the window and make the
condition window the current window if the diagnostic
history window is not displayed.
If the user attempts to close the diagnostic information
window and the diagnostic history window is still
displayed, the diagnostic information window is
dismissed but the diagnostic history window remains.
If the condition window is closed, then both the
diagnostic information and diagnostic history windows
are closed if open.
If the user does not specify an end time for the history
interval in 3.1.3.2.4.1 Browsing Arbitrary History Intervals
(1), it defaults to the current time.

3.1.3.3 Special Requirements
There are no special requirements for this use case.
3.1.3.4 Preconditions
The diagnostic processing need not be active for this use case. A diagnostic information window
must be displayed for this use case to begin.
3.1.3.5 Postconditions
The diagnostic processing will not cease or be negatively impacted during the activities of this
use case.

Battelle Northwest, 2003

Page 13

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.1.3.6 Extension Points
There are no extension points for this use case.
3.1.4

Configure Diagnostics Use Case

3.1.4.1 Brief Description
This use case provides the actor the means to configure the diagnostic tool. This includes
defining the buildings containing systems to be diagnosed, defining the systems themselves,
specifying equipment setpoints, selecting diagnostic sensitivity, and modifying fixed data. The
actor in this case is the administrator user (see 2.5.1).
3.1.4.2 Flow of Events
The diagnostic tool is executing prior to the processing of this use case and only the main window
of the tool is displayed.
3.1.4.2.5

Basic Flow – Configure Diagnostics
1.

2.
3.
4.
5.
6.

7.
8.

9.
10.

11.

12.

13.

When presented with the main window, the user may
select the “Configure Diagnostics” menu item from the
menu entitled “File”.
If the user has not already been authenticated as the
administrator user, include (Authenticate User).
If the user has the appropriate privilege, the tool displays
the configuration window.
The user may click the “Recall” button to read previously
saved changes from a disk file or database.
The tool populates the window with the data from the
disk file.
The user makes the desired changes to the
configuration and can click the button labeled “Save” to
save the changes. Otherwise, the user can click the
button labeled “Close”.
If the user clicks the button labeled “Save”, the tool will
request confirmation to save the changes.
If the user confirms, the tool will request a name for the
disk file in which to save the modified data to permanent
storage.
The user will enter a name for the file or cancel the
operation.
If the user enters a name for the file, the tool will save
the changes. If the user cancels the operation, the tool
will perform no function.
If the tool completes the save operation, the tool will ask
the user if the changes are to be relayed to the
diagnostic processing for immediate use.
If the user confirms the changes are to be relayed to the
diagnostic processing, the tool relays the changes if the
processing is currently active. Otherwise, the tool does
not relay the changes.
If the user clicks the button labeled “Close”, the tool will
request confirmation for the close and the potential loss
of any changes.

Battelle Northwest, 2003

Page 14

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

14. If the user confirms, the tool will dismiss the
configuration window, ignoring any changes and returns
the user to the main window. If the user rejects the initial
desire to close, the tool will perform no function.
3.1.4.2.6

Alternative Flows

There are no alternative flows for this use case.
3.1.4.3 Special Requirements
There are not special requirements for this use case.
3.1.4.4 Preconditions
The main window of the tool must be the only window active for the tool prior to execution of this
use case.
3.1.4.5 Postconditions
Any changes made by the administrator user to the diagnostic tool will take affect immediately if
requested by the user.
3.1.4.6 Extension Points
There are no extension points for this use case.
3.1.5

Authenticate User

3.1.5.1 Brief Description
This use case establishes the privileges of the user for certain functions of the tool.
3.1.5.2 Flow of Events
This use case begins when another use case requires its instantiation.
3.1.5.2.7

Basic Flow
1.

2.
3.
4.
5.

6.
3.1.5.2.8

The tool displays a window for entry of authenticating
information, i.e., user name and password, to validate
and establish the privileges of the user.
The user enters their user name and password.
The tool attempts to authenticate the user and indicates
whether authentication has succeeded or not.
If authentication is unsuccessful, the user is returned to
the authentication window to reenter the information.
The tool permits three attempts at authentication before
dismissing the authentication window and returning the
user to the previous window.
The user may cancel the authentication process at any
time and return to the previous window.

Alternative Flows

There are no alternative flows for this use case.
3.1.5.2.9

Special Requirements

There are no special requirements for this use case.

Battelle Northwest, 2003

Page 15

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003
3.1.5.2.10

Preconditions

There are no preconditions for this use case.
3.1.5.2.11

Postconditions

There are no postconditions for this use case.
3.1.5.2.12

Extension Points

There are no extension points for this use case.
3.2

Functionality
This section describes the functional requirements of the software, that is, requirements
describing the core functions the software must perform. This section begins with general
requirements relevant to the tool as a whole. Subsequently, requirements are organized by the
logical construction of the tool as data processing progresses from preprocessing to output
processing.

3.2.1

General
The following general requirements pertain equally to the logical partitions of the tool.

3.2.1.1 Users of the tool shall be classified into two types. The first type, general user, shall only be
permitted to utilize a limited set of the capabilities of the tool. These capabilities are listed in Table 2.
Typically a general user is only permitted to view the results of diagnostic processing either current or
historical. The second type, administrator, shall be permitted all the privileges of the general user plus
those identified in Table 2. The administrator is permitted all the privileges of the general user in addition
to the privileges to configure the system and modify fixed data and diagnostic settings.
Table 2 User Privileges
General User
Privileges
Browse Current
Diagnostics
Browse Historical
Diagnostics
3.2.2

Administrator Privileges
Beyond General User’s
Start/Stop Diagnostics
Configure Diagnostics
Define sensed data input
units

Preprocessing
The automated diagnostic tool shall input sensed data in real time from data acquisition devices
and the HVAC unit under diagnosis as well as from data files containing previously acquired data,
though not simultaneously. In addition, the tool shall input fixed data provided by the user.
Sensed and fixed data used by the tool in performing automated diagnostics shall be stored to
permanent storage for post-analysis by the diagnostic process and viewing of the results.

3.2.2.1 The tool shall input sensed data in real time from data acquisition devices and the HVAC unit
under diagnosis. The absolute time of input will be associated with each sensed data item for its
complete lifecycle, including permanent storage. The time will be determined at the instant the
acquisition of the sensed data is complete.

Battelle Northwest, 2003

Page 16

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

3.2.2.2 The tool shall permit sensed data to be input from an electronic file, though not simultaneously
with sensed data from external acquisition hardware. When inputting sensed data from an electronic file,
only one file shall be used containing all necessary sensed data. The file shall be an ASCII text file
containing only columns delimited by a single tab character or single comma. The file shall begin with a
required header. The first column of the header will list, at a minimum, the entries “”Building Identifier”
and “Input Identifier” in that order. Following columns on the Input Identifier row will list integer input
identifiers. Following columns on the Building Identifier row will list corresponding integer building
identifiers for the inputs. One or more comment rows may exist above and below these required rows.
These comment rows are identified by a ‘#’ as the first character of the first column. These rows are
ignored by the tool. The first uncommented column in the file after the required headers shall list the
absolute time, in ascending order, associated with all entries in subsequent columns of the row. Each
additional column in the file shall pertain to one and only one sensed parameter. Data values in the same
row of the file correspond to identical time values. All columns in the file shall have the same number of
rows. An example input file is presented in Table 3. When the tool is processing sensed data from an
input file, the tool is considered to be operating in “batch mode”.
Table 3 Example Input Data File Reflecting Specified Format
#Test Run
#Sensor Name
Building Identifier
Input Identifier
12/14/01 8:43
12/14/01 13:30
12/14/01 20:01

Temperature
1
1
12.4
5.4
123.5

Flow
1
2
35.8
955.1
576.21

Pressure
2
3
407.3
971.0
491.4

3.2.2.3 Each sensed data item will be qualified as to its certitude during the acquisition process. Sensed
data will be considered in doubt if acquisition of the data was not possible (for example, if an error occurs
during communication with the acquisition hardware), or the data is outside the range of possible values.
Otherwise, the sensor value will be deemed accurately acquired.
3.2.2.4 The software will deem sensed data in doubt if acquisition of the data is not possible, due to
communication failures, for a default number of successive samples. The default is dependent on sensor
type. These default values are specified in Table 4. The number of successive samples for a given
sensor type shall be modifiable by the administrator. Data not successfully acquired will be deemed
“missing data”.

Table 4 Default Number of Failed Successive Samples Indicating Sensor Data Acquisition Problem.
Sensor Type

Temperature
Current
Switch

Default Number of
Failed Successive
Samples
3
3
3

Battelle Northwest, 2003

Page 17

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.2.2.5 Sensed data used in or supporting diagnostic analyses shall be saved to permanent storage.
3.2.2.6 The occurrence of missing data shall be indicated in permanent storage by a unique and obvious
place holder or indicator, e.g., a null value or sequence of characters that cannot be confused with nonmissing data.
3.2.2.7 Sensed data input to the tool shall be stored to permanent storage with a precision of three
significant figures.
3.2.2.8 Sensed data input to the tool shall be validated with respect to its expected range of values.
Sensed data shall be assigned the ranges listed in Table 5 by default.
Table 5 Default sensed data expected ranges
Sensor

Expected Minimum
Value

Ambient Temperature
Ambient wet-bulb Temperature

Chilled Water Supply Temperature
CT Sump Temperature
CT Inlet Temperature

Compressor Current (or Power)
Condenser Pump Current (or Power)
Chilled Water Pump Current (or
Power)
Secondary Chilled Water Pump(s)
Current (or Power)
Cooling Tower Fan(s) Current (or
Power)
Condenser Fan(s) Current (or Power)
Supply Fan(s) Current (or Power)

Expected Maximum
Value

-40 F
-40 F
30F
32F
35F
0
0
0

130 F
100F
80F
130F
130F
NA, Chiller dependent
200 amps
200 amps

0

200 amps

0

200 amps

0
0

200 amps
1000 amps

3.2.2.9 The administrator shall have the capability to modify the expected range of sensed data against
which the data will be validated.
The engineering units of sensed data input to the tool shall comply with the units listed in

3.2.2.10

Table 6 for the associated physical parameter measured prior to input to the diagnostics.
The tool shall provide the capability to convert sensed data not provided in the units listed in

Battelle Northwest, 2003

Page 18

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003
Table 6 to the required units.

Table 6. Required engineering units for sensed data.
Physical
Parameter

Engineering
Units for
Sensed Data

Temperature

Degrees F

Current

Amps

3.2.2.11
The tool shall associate with each continuous parameter one or more tolerances each
corresponding to a different sensitivity level for the tool.
3.2.2.12
Any and all errors associated with obtaining, validating, converting, or storing the sensed
data shall be logged as described in subsequent specifications and selected errors shall be reported to
the user.

3.2.3

Diagnostic Process
The automated diagnostic tool shall detect and identify certain performance and operational faults
in chiller and cooling tower subsystems of HVAC units following specified algorithms. In addition,
the tool shall be designed to permit expansion of diagnostic analysis to additional subsystems.
The faults identified and their causes and sources, shall be saved to permanent storage for
subsequent analysis.

3.2.3.1 The tool shall monitor performance and operational parameters listed in Table 7 for chillers and
cooling towers and identify the specific faults in the specific fault categories listed in the table.
Table 7. Performance and Operational Parameters Monitored by the Automated Diagnostic Tool and
Specific Faults Identified
Subsystem(s)

Chiller

Monitored Parameter
Chilled Water Supply
Temperature Maintenance

Fault Category
Chilled Water Supply Temperature not
Maintained Correctly

Chiller Schedule

Chiller Schedule is Incorrect/in
Error/Corrupt/Inefficient/not Followed

Battelle Northwest, 2003

Fault
The chilled water supply
temperature is too high
The chilled water supply
temperature is too low
The chiller is on when it
should be off. Energy is
being wasted.

Page 19

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

Compressor Cycling

Compressor Cycling is Abnormal

Compressor and Condenser Fan
Interlock (for air-cooled

Compressor is Improperly Interlocked
with Condenser Fan

condensers only)

Compressor and Condenser
Pump Interlock (for water-

Compressor is Improperly Interlocked
with Condenser Pump

cooled condensers only)

Cooling Tower

Cooling Tower Fan Cycling

Cooling Tower Fan Cycling Problem

Sump Temperature Control

Sump Temperature is Improperly
Controlled

Cooling Tower Approach

Cooling Tower Approach Problem

Battelle Northwest, 2003

The compressor is cycling on
too frequently. It is not
staying off for the minimum
required off time.
The compressor is cycling off
too frequently. It is not
staying on for the minimum
required on time.
The compressor is on while
the condenser fan is off. The
chiller cannot reject heat and
this could damage the
compressor
The condenser fan is on
while the compressor is off.
The fan is running
unnecessarily and wasting
energy.
The compressor is on while
the condenser pump is off.
The chiller cannot reject heat
and this could damage the
compressor.
The condenser pump is
cycling unnecessarily
frequently. Repeated
frequent cycling will shorten
the life of the condenser
pump.
The condenser pump is
turning on too much in
advance of the compressor
and wasting energy.
The cooling tower fan is not
staying off long enough
during cycling.
The cooling tower fan is not
staying on long enough
during cycling.
The cooling tower fan is off
but should be on. As a result,
the condenser water is not
being cooled sufficiently.
The cooling tower fan is on
but it should be off. Energy
is being wasted.
The cooling tower approach
is greater than the Approach
Benchmark provided in set
up. Heat rejection from the
cooling tower is less than
expected.

Page 20

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Chilled Water
Loop

Version:
1.1
Date: 8/28/2003

Cooling Tower Fan Staging

Cooling Tower Fan Staging Problem

Cooling Tower Range

Cooling Tower Range Problem

Supply Fan(s) and the PrimaryLoop Chilled Water Pumps
Interlock

Supply Fan(s) and the Primary-Loop
Chilled Water Pumps are not Interlocked
Properly

Supply Fan(s) and the
Secondary-Loop Chilled Water
Pumps Interlocked

Supply Fan(s) and the Secondary-Loop
Chilled Water Pumps are not Interlocked
Properly.

Battelle Northwest, 2003

The Sump temperature is
above the cooling tower fan
“on” set point, but all cooling
tower fans are not on. This
indicates a problem with the
fan staging and, as a result,
the cooling tower is not
maintaining the sump
temperature as low as it
should.
A fan is on even though the
sump temperature is below
the “off” set point. This
indicates a fan staging
problem, and energy is being
wasted. All cooling tower
fans should be off.
The cooling tower range is
below its benchmark. As
result, heat rejection by the
cooling tower is less than
expected and the cooling
tower is performing at less
than its capacity.
The is possibly a problem
with the supply fan control.
This chilled water pump is
being operated unnecessarily
and is wasting energy. The
chilled water pump should
not operate unless at least
one of the supply fans in an
air handling unit served by
the chilled water pump is on.
Possible problem with
secondary chilled water
pump control—check to see
if loads in the spaces served
are being met for all supply
fans that are part of air
handlers served by this
secondary chilled water loop
and that is on when the
secondary chilled water
pump is off.

Page 21

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

Secondary and Primary Loop
Chilled Water Pumps Interlock

Secondary and Primary Loop Chilled
Water Pumps are not Interlocked
Properly

Chiller/Cooling
Tower

Cooling Tower Fan(s) and
Condenser Pump Interlock

Cooling Tower Fan(s) and Condenser
Pump are not Interlocked Properly

Chiller/Water
Loop

Compressor and Primary Chilled Compressor and Primary Chilled Water
Water Pump(s) Interlock
Pump(s) are not Interlocked Properly

Battelle Northwest, 2003

The secondary chilled water
pump and some of the supply
fans that are served by it are
not interlocked properly.
This secondary chilled water
pump is operating
unnecessarily when all
supply plans it serves are off
and, as a result, is wasting
energy. The secondary
chilled water pump should
not operate unless at least
one of the supply fans in an
air handler served by this
pump is on.
The secondary chilled water
pumps that are on are
wasting energy. Secondary
chilled water pumps should
only operate when the
primary CHW pump is
operating.
The cooling tower fan and
condenser pump are not
interlocked properly. Energy
is being wasted because the
cooling tower fan should be
off when the condenser pump
is not operating.
The interlock between the
condenser pump and the
cooling tower may not be
properly implemented. The
cooling tower fan may be off
when the condenser pump is
running, but this should not
always be the case.
The primary chilled water
pumps are not interlocked
properly with the
compressor. The condenser
pump is cycling on and off
unnecessarily. Repeated
frequent cycling will shorten
the life of the pump.
The compressor is not
properly interlocked with the
primary chilled water pumps.
The chiller is operating
without a load. Energy is
being wasted and damage to
the compressor may result.

Page 22

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

The compressor is not
properly interlocked with the
primary chilled water pumps.
Water side economizing is
not being used, and the
primary chilled water pumps
are cycling on too much in
advance of the compressor
and wasting energy.

3.2.3.2 With each fault identified in Table 7, the tool shall associate text describing the possible problem,
causes, and a recommended fix. This text for each fault is listed in Table 8.
Table 8 Text to Associate with Each Anomaly Detected
Subsystem(s)
Chiller

Fault Category
Chilled Water Supply
Temperature not Maintained
Correctly

Chiller Schedule is
Incorrect/in
Error/Corrupt/Inefficient/not
Followed
Compressor Cycling is
Abnormal

Fault/Possible
Problem

Causes

The chilled water
supply temperature is
too high

1) Chilled water
supply temperature
set point is set too
high. 2) Chiller
load exceeds
capacity.

The chilled water
supply temperature is
too low

1) Chilled water
supply temperature
set point is lower
than necessary.
Incorrectly
specified schedule.

The chiller is on when it
should be off. Energy is
being wasted.
The compressor is
cycling on too
frequently. It is not
staying off for the
minimum required off
time.

Battelle Northwest, 2003

Fix

1) Incorrectly
specified minimum
off time in the setup of this
diagnostic, 2)
Incorrectly
specified minimum
off time in the
control algorithm
for the compressor,
3) a failed relay or
mis -adjusted relay,
for compressors
having the
minimum off time
controlled by a
relay.
Page 23

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003
The compressor is
cycling off too
frequently. It is not
staying on for the
minimum required on
time.

Compressor is Improperly
Interlocked with Condenser
Fan (for air-cooled

condensers only)

The compressor is on
while the condenser fan
is off. The chiller cannot
reject heat and this could
damage the compressor

The condenser fan is on
while the compressor is
off. The fan is running
unnecessarily and
wasting energy.

Compressor is Improperly
Interlocked with Condenser
Pump (for water-cooled

condensers only)

The compressor is on
while the condenser
pump is off. The chiller
cannot reject heat and
this could damage the
compressor.

Battelle Northwest, 2003

Version:
1.1
Date: 8/28/2003

1) Incorrectly
specified minimum
on time in the set-up
of this diagnostic, 2)
Incorrectly
specified minimu m
off time in the
control algorithm
for the compressor,
3) a failed relay or
mis -adjusted relay,
for compressors
having the
minimum on time
controlled by a
relay.
The compressor is
on while the
condenser fan is off.
The interlock
between the
compressor and
condenser fan in the
control code is not
specified correctly
or is overridden.
The condenser fan
is running while the
compressor is off.
This wastes energy.
The interlock
between the
compressor and
condenser fan in the
control code is not
specified correctly
or is overridden.
The compressor is
on while the
condenser pump is
off. The interlock
between the
compressor and
condenser pump in
the control code is
not specified
correctly or is
overridden.

Page 24

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003
The condenser pump is
cycling unnecessarily
frequently. Repeated
frequent cycling will
shorten the life of the
condenser pump.
The condenser pump is
turning on too much in
advance of the
compressor and wasting
energy.
Cooling Tower Cooling Tower Fan Cycling
Problem

The cooling tower fan is
not staying off long
enough during cycling.

The cooling tower fan is
not staying on long
enough during cycling.

Sump Temperature is
Improperly Controlled

The cooling tower fan is
off but should be on. As
a result, the condenser
water is not being cooled
sufficiently.

Battelle Northwest, 2003

Version:
1.1
Date: 8/28/2003

The Condenser
Pump is turning on
and off tool
frequently.

The Condenser
Pump Maximum
Start-Up time is not
specified correctly
or is overridden in
the control code.
1) The timer that is
intended to
eliminate short
cycling is not
working. 2) The
“on” and “off”
control set points
for the cooling
tower fan are too
close to one
another.
1) The timer that is
supposed to
eliminate short
cycling is not
working properly.
2) The "on" and
"off" control set
points for the fan
are too close to one
another. 3) The
cooling tower
capacity is too great
for the load, so the
fans rapidly cycle
off (i.e., the on time
is very short)
because the load is
met quickly.
1) a cooling tower
control problem, 2)
sump temperature
sensor problem, 3)
electrical problems
such as a motor
failure, 4) other
problems with the
fan motor.

Page 25

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003
The cooling tower fan is
on but it should be off.
Energy is being wasted.
Cooling Tower Approach
Problem

The cooling tower
approach is greater than
the Approach
Benchmark provided in
set up. Heat rejection
from the cooling tower is
less than expected.

Cooling Tower Fan Staging
Problem

The Sump temperature is
above the cooling tower
fan “on” set point, but all
cooling tower fans are
not on. This indicates a
problem with the fan
staging and, as a result,
the cooling tower is not
maintaining the sump
temperature as low as it
should.

A fan is on even though
the sump temperature is
below the “off” set
point. This indicates a
fan staging problem,
and energy is being
wasted. All cooling
tower fans should be
off.

Battelle Northwest, 2003

Version:
1.1
Date: 8/28/2003

1) a cooling tower
control problem, 2)
an actuator or relay
has failed.
1) The cooling
tower media is
fouled due to
mineral deposits or
ambient dirt, dust,
or other
contaminants.
2) Restricted
airflow for other
reasons (e.g., piece
of cardboard stuck
over part of cooling
tower air inlet). 3)
There is condenser
pump fouling, pipe
fouling, or other
restrictions on the
water side.
1) Different values
of the fan “on” set
point are specified
in the fan controller
and this software.
2) Fan staging
control algorithm is
not correctly
specified. 3) A fan
motor or electrical
connection has
failed. 4) The
sump temperature
sensor has failed or
is out of calibration.
1) Different values
of the fan “off” set
point are specified
in the fan controller
and this software.
2) Fan staging
control algorithm is
not correctly
specified. 3) The
sump temperature
sensor has failed or
is out of calibration.

Page 26

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Chilled Water
Loop

Cooling Tower Range
Problem

The cooling tower range
is below its benchmark.
As result, heat rejection
by the cooling tower is
less than expected and
the cooling tower is
performing at less than
its capacity.

Supply Fan(s) and the
Primary-Loop Chilled Water
Pumps are not Interlocked
Properly

The is possibly a
problem with the supply
fan control.

This chilled water pump
is being operated
unnecessarily and is
wasting energy. The
chilled water pump
should not operate
unless at least one of
the supply fans in an air
handling unit served by
the chilled water pump
is on.

Battelle Northwest, 2003

Version:
1.1
Date: 8/28/2003

1) Tower media
may be fouled due
to mineral deposits
or ambient dirt,
dust, or other
contaminants.
2) the airflow is
restricted by some
other obstruction.
3) The condenser
pump is fouling,
pipes are fouling, or
there are other
water-side flow
restrictions. 4) The
cooling tower is too
small for the load
(i.e., there is a
design problem)
The chilled water
pump is off and the
supply fan for at
least one air handler
served by this pump
is on. There may be
a problem with the
control of this
supply fan or other
parts of the air
handlers with
supply fans
operating under
these conditions.
Improper interlock
between the chilled
water pump and the
supply fans.

Page 27

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003
Supply Fan(s) and the
Secondary-Loop Chilled
Water Pumps are not
Interlocked Properly.

Possible problem with
secondary chilled water
pump control—check to
see if loads in the spaces
served are being met for
all supply fans that are
part of air handlers
served by this secondary
chilled water loop and
that is on when the
secondary chilled water
pump is off.
The secondary chilled
water pump and some
of the supply fans that
are served by it are not
interlocked properly.
This secondary chilled
water pump is operating
unnecessarily when all
supply plans it serves
are off and, as a result,
is wasting energy. The
secondary chilled water
pump should not
operate unless at least
one of the supply fans
in an air handler served
by this pump is on.
Secondary and Primary Loop The secondary chilled
Chilled Water Pumps are not water pumps that are on
Interlocked Properly
are wasting energy.
Secondary chilled water
pumps should only
operate when the primary
CHW pump is operating.
Chiller/Cooling Cooling Tower Fan(s) and
The cooling tower fan
Tower
Condenser Pump are not
and condenser pump are
Interlocked Properly
not interlocked properly.
Energy is being wasted
because the cooling
tower fan should be off
when the condenser
pump is not operating.

Battelle Northwest, 2003

Version:
1.1
Date: 8/28/2003

Improper interlock
between the
secondary chilled
water pump and the
supply fans of air
handlers it serves.

Improper interlock
between the
secondary chilled
water pump and the
supply fans of air
handlers it serves.

Improper interlock
between the
secondary chilled
water pump and the
supply fans of air
handlers it serves.
The cooling tower
fan and condenser
pump are not
interlocked
properly.

Page 28

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Chiller/Water
Loop

Compressor and Primary
Chilled Water Pump(s) are
not Interlocked Properly

The interlock between
the condenser pump and
the cooling tower may
not be properly
implemented. The
cooling tower fan may
be off when the
condenser pump is
running, but this should
not always be the case.
The primary chilled
water pumps are not
interlocked properly with
the compressor. The
condenser pump is
cycling on and off
unnecessarily. Repeated
frequent cycling will
shorten the life of the
pump.
The compressor is not
properly interlocked
with the primary chilled
water pumps. The
chiller is operating
without a load. Energy
is being wasted and
damage to the
compressor may result.
The compressor is not
properly interlocked
with the primary chilled
water pumps. Water
side economizing is not
being used, and the
primary chilled water
pumps are cycling on
too much in advance of
the compressor and
wasting energy.

Version:
1.1
Date: 8/28/2003

The cooling tower
fan and condenser
pump may not be
interlocked
properly.

The chilled water
pump is cycling
between on and off
while the
compressor is off.
The primary chilled
water pumps are not
interlocked properly
with the
compressor.
The compressor is
running while the
primary chilled
water pumps are not
operating because
the compressor is
not properly
interlocked with the
primary chilled
water pumps.
The primary chilled
water pumps are
cycling on too much
in advance of the
compressor turning
on.

3.2.3.3 The tool shall be designed to permit the addition of diagnostic algorithms for other subsystems of
HVAC units.
3.2.3.4 A diagnostic algorithm shall not process if any input data to the algorithm is missing. The user
shall be notified if a diagnostic algorithm cannot process due to missing data.

Battelle Northwest, 2003

Page 29

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.2.3.5 Any and all errors associated with failures of the diagnostic algorithms shall be logged as
described in subsequent specifications and selected errors shall be reported to the user.
3.2.3.6 The tool shall monitor the unit under diagnosis, either in real time or batch mode, for an indefinite
period of time or until input data are no longer available, and log diagnostic results as they are
determined.
3.2.3.7 Diagnostic results that are saved to permanent storage shall be accompanied in storage by the
absolute time of occurrence, the identity of the unit to which the diagnostic applies, and the identity of the
diagnostic.
3.2.3.8 The administrator user shall have the capability to adjust the sensitivity of the diagnostic analysis
in order to increase or decrease the probability of fault detection.
3.2.4

Output Processing
The automated diagnostic tool shall display and record diagnostic results. Diagnostic results to
be displayed to the user will be done so in a simple, graphical and textual format. Diagnostic
results shall also be saved to permanent storage for subsequent retrieval, display, and analysis.

3.2.4.1 The administrator shall have the ability to specify which diagnostic results will not be reported in
any manner, i.e., not detected.
3.2.4.2 The display of each diagnostic result for fault conditions will include a description of the fault,
potential causes of the fault, the location of the fault, and the absolute time of occurrence.
3.3

Usability
This section describes requirements related to the usability of the tool.

3.3.1

User Interface
The following specifies usability requirements for the user interface.

Battelle Northwest, 2003

Page 30

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.3.1.1 The area on the main, systems, and condition windows sensitive to the users selection device,
typically the mouse, shall include the line surrounding the item of interest over the entire width of the
window. This includes the diagnostic indicators.
3.3.1.2 The windows listing diagnostic results shall increase in height as needed to display entries up to a
maximum of ten entries. Once the window has reached maximum size and there are additional items to
display, the window shall deploy a scroll bar to permit the user to scroll through the additional entries. In
this event, a summary set of diagnostic indicators shall appear above (below) the top (bottom) entry in the
display. This set(s) of indicators shall summarize diagnostic indicators not currently appearing on the list
above (below) it. An indicator in the summary set shall be active if any similar indicator not appearing
above (or below) it is active. The summary set indicators comply with the same specification for
activation as other indicators (see 3.5.1.39).
3.3.1.3 The building, subsystems, and condition windows shall display the current time if the diagnostic
tool is operating in real time. If the tool is operating in batch mode, the time displayed will be the time
associated with the entry currently being processed in the batched input.
3.3.1.4 If only a single building is defined, the subsystems window shall become the main window of the
application and shall have all the functionality of the main window as described in these specifications.
3.3.1.5 Each window of the diagnostic tool shall display an animated graphical feature indicating the
status, whether active or not, of the diagnostic processing.
3.3.1.6 The subsystem window shall be modal to the building window, the condition window modal to the
subsystem window, and the diagnostic history and diagnostic information windows shall be modal to the
condition window.
3.4

Supportability
This section describes requirements related to the support of the software after initial installation.

3.4.1

Error Reporting
Significant errors in software operation shall be logged to permanent storage with sufficient detail
to guide the administrator and to assist support staff in locating and rectifying the error. In
addition, selected errors shall be reported to the user.

3.4.1.1 Software errors logged to permanent storage shall include the absolute time of occurrence, the
name of the software module in which the error occurred, the name of the software function in which the
error occurred, and a description of the error.
3.5

Interfaces
This section describes requirements related to interfaces of the tool.

3.5.1

User Interfaces
This section describes the specifications for the user interface.

3.5.1.1 The user interface shall consist of six windows: Main window, configuration window, subsystems
window, condition window, diagnostic information window, and diagnostic history window.
3.5.1.2 These windows shall be organized in a hierarchy enforcing a navigational order on the user. This
hierarchy is depicted in Figure 4. As indicated in the figure, the main window is at the top of the hierarchy
Battelle Northwest, 2003

Page 31

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

and is the first window that appears when the tool begins execution. The configuration window is
subordinate to the main window and can only be displayed by a user selection on the main window. The
third window in the hierarchy is the subsystems window and it can only be displayed by a user selection
on the main window. The fourth window in the hierarchy is the condition window and it can only be
displayed by a user selection on the subsystems window. The fifth window is the diagnostic information
window. This window can only be displayed by a user selection on the condition window or by a user
selection on the diagnostic history window if it is displayed. The diagnostic history window can only be
displayed by a user action on the diagnostic information window.

Main (Initial)
Window
Configuration
Window

Vertical arrangement
reflects hierarchy

Subsystems
Window

Directed arrows
indicate possible
navigational paths

Condition
Window

Diagnostic
History Window

This path valid only
if diagnostic history
window not displayed.

Diagnostic
Information
Window

Figure 4 User Interface Window Hierarchy

3.5.1.3 The main (e.g., initial or default) window shall list buildings monitored and summarizing the
current diagnostic status of all contained monitored units. A recommended layout for this window is
presented in Figure 5. This window shall be titled “Diagnostician”.

Battelle Northwest, 2003

Page 32

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

Diagnostician

October 18, 2001

2:20pm
OK

Not
OK

Building 1
Building 2
Building 3
Building 4
Building 5

Figure 5 Recommended Layout for Main Window

3.5.1.4 The main window shall have main menus entitled “File” and “Status”.
3.5.1.5 The main menu entitled “File” shall contain the following menu items in the following order:
“Configure Diagnostics”, “Logout”, “Exit”.
3.5.1.6 The main menu entitled “Status” shall contain the following menu items in the following order:
“Start Diagnostics”, “Stop Diagnostics”.
3.5.1.7 The menu items named “Configure Diagnostics” and “Exit” in the main menu entitled “File” shall
be enabled at all times.
3.5.1.8 The menu item named “Logout” in the main menu entitled “File” shall be enabled only if the
current user is presently authenticated as the administrator user. Otherwise, this menu item shall be
disabled.
3.5.1.9 The menu item named “Start Diagnostics” in the main menu entitled “Status” shall be enabled
only if diagnostic processing is not currently running. Otherwise, the menu item shall be disabled.
3.5.1.10
The menu item named “Stop Diagnostics” in the main menu entitled “Status” shall be
enabled only if diagnostic processing is currently running. Otherwise, the menu item shall be disabled.
3.5.1.11
Selecting the “Configure Diagnostics” menu item of the main menu entitled “File” shall
display the configuration window, making it the current window, modal to the main window.
3.5.1.12
parameters:

The configuration window shall permit the administrator user to modify the following
a.
b.
c.
d.

The password for the administrator user.
A toggle enabling or disabling the main window of the tool as a screen saver.
A toggle enabling or disabling the main window’s position on the screen as the top
most window.
Buildings and subsystems to be monitored and the conditions they will be monitored
Battelle Northwest, 2003

Page 33

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

e.
f.
g.
h.
3.5.1.13

Version:
1.1
Date: 8/28/2003

for. The conditions will be selected from a list provided by the tool.
The enabled state of individual conditions. Disabled conditions will not be processed
or displayed.
The sensitivity of each condition by selecting a sensitivity from a list provided by the
tool.
Scale factors for transforming the engineering units of sensed input data to the
required units.
The expected range of sensed input data.

The configuration window shall display the following non-modifiable information:
a.

3.5.1.14
The configuration window shall have a button labeled “Save” that when clicked will
present the user with a window by which to enter a disk file or database name in which to save the
modifiable data in the window. Entering a file name shall cause the permanent storage of the modified
parameters and their immediate use by the diagnostic operations after confirmatory responses by the
user. If the user does not confirm the request to save, it will not be performed. If the user does not
confirm the request to relay the modified parameters to the diagnostic processing immediately, it will not
be performed. In either event, the configuration window will remain displayed.
3.5.1.15
The configuration window shall have a button labeled “Close” that will dismiss the
configuration window and return the user to the main window. If the user has made changes to data in
the configuration window, the tool will request confirmation of the user’s desire to dismiss the window. If
the user does not confirm the request, the window will not be dismissed.
3.5.1.16
The configuration window shall have a button labeled “Recall” that will permit the user to
recall a disk file of previously saved parameters from which to populate the configuration window. When
functioning as a screen saver, the window shall change location on the screen periodically and will
continue to be updated by diagnostic results.
3.5.1.17
The subsystems window shall list subsystems monitored for a specific building and
summarizing the current diagnostic status of all monitored subsystems. A recommended layout for this
window is presented in Figure 6.

Diagnostician - Building 2

October 18, 2001

2:20pm
OK

Not
OK

Chiller 1
Cooling Tower
Chiller 1/Cooling Tower Interactions
Water Loop
Close

Figure 6 Recommended Layout for Systems Window

Battelle Northwest, 2003

Page 34

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

3.5.1.18
The condition window shall list the current status of all diagnostics for a specific
subsystem. A recommended layout for this window is depicted in Figure 7.

Diagnostician - Building 2, Chiller 1

October 17, 2001

9:00am

Not
OK

OK

Chiller 1
Chiller Schedule
Chilled Water Supply Temperature (CHWST)
Compressor Interlock/Fan
Compressor Interlock/CHW Pump
Compressor Interlock/Condenser Pump
Compressor Off Cycle

Close

Figure 7 Recommended Layout for Condition Window

3.5.1.19
The diagnostic information window shall provide a detailed description of the diagnostic.
A recommended layout for this window is depicted in Figure 8.
Diagnostician Detail - Building 2, Chiller 1

October 17, 2001

9:00am

Chilled Water Supply Temperature:
Possible Problem: The chilled water supply temperature is too high.
Causes: 1) Chilled water supply temperature set point is set too high. 2)
Chiller 1 load exceeds capacity.
Fix: 1) Adjust chilled water supply set point appropriately. 2) Estimate
load from the temperature difference between chilled water supply
temperature and chilled water return temperature and the chilled water
loop flow rate.

Print

History

Reset

Close

Figure 8 Recommended Layout for Diagnostic Information Window

Battelle Northwest, 2003

Page 35

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

3.5.1.20
The diagnostic information window shall have a button labeled “Print” that when clicked
will display a window listing items to print including the diagnostic information window, the history window,
and both the diagnostic and history windows. The user selects the item of interest and clicks the “OK”
button to print the selection, an image(s) of the item(s) selected.
3.5.1.21
diagnostic:

The diagnostic information window shall include the following information regarding the
1.
2.
3.

3.5.1.22
the window.

A description of the possible problem.
Potential causes.
Fixes.

The diagnostic information window shall have a button labeled “Close” that shall dismiss

3.5.1.23
The diagnostic information window shall have a button labeled “History” that when clicked
will display the diagnostic history window and display the previous week’s diagnostic results.
3.5.1.24
The diagnostic history window shall display historical diagnostic results for a specific
diagnostic. A recommended layout for this window is depicted in Error! Reference source not found..
This figure includes a color map that provides a graphical indication of diagnostic condition.
Diagnostician History - Building 2, Chiller 1- Chilled Water Supply Temperature

24

Hour of Day

21

18

15

12

9

6

3

0

10/14
S

10/15
M

10/16
T

10/17
W

10/18
TH

10/19
F

10/20
S

10/21
S
Print

Close

Figure 9 Recommended Layout for Diagnostic History Window

Battelle Northwest, 2003

Page 36

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.5.1.25
The diagnostic history window shall provide user selections for start times and end times
for the history interval. These selections shall be in the form of a calendar control.
3.5.1.26

The smallest time interval displayed by the diagnostic history window is one week.

3.5.1.27
years.

The longest time interval that may be displayed by the diagnostic history window is two

3.5.1.28
The color map of the history window shall indicate confirmed faults with the color red,
potential faults with the color yellow, normal conditions with the color green, and periods when diagnostic
processing was not active with the color gray. Diagnostic processing should be assumed inactive
between periods of time when no confirmed fault, potential fault, or normal condition has been recorded.
3.5.1.29
The vertical axis of the color map of the history window shall indicate hour of the day and
the horizontal axis shall indicate the absolute date and the day of week.
3.5.1.30
The diagnostic history window shall have a button labeled “Print” that when clicked will
display a window listing items to print including the diagnostic information window, the history window,
and both the diagnostic and history windows. The user selects the item of interest and clicks the “OK”
button to print the selection, an image(s) of the item(s) selected.
3.5.1.31
window.

The diagnostic history window shall have a button labeled “Close” that will dismiss the

3.5.1.32
The subsystems window, condition window, and diagnostic information window shall
display a title that indicates its specific location or absolute path in the navigation hierarchy of windows.
This title shall be a concatenation of the title of the previous window displayed, not including the
diagnostic history window, and the name of the entry selected to obtain the current window. The two
parts of the title shall be separated by a dash surrounded by a single space.
3.5.1.33
The main window, subsystems window, condition window, and diagnostic information
window shall display the appropriate time below the title as specified in 3.3.1.3.
3.5.1.34
The main window, subsystems window, and condition window shall have three diagnostic
indicators for each item listed.
3.5.1.35
One indicator shall be active when no diagnostic conditions exists. This indicator shall be
designated the “OK” indicator and shall appear green when active.
3.5.1.36
One indicator shall be active when a potential diagnostic condition exists. This indicator
shall be designated the “Caution” and shall appear yellow when active.
3.5.1.37
One indicator shall be active when a confirmed diagnostic condition exists. This indicator
shall be designated the “Not OK” indicator and shall appear red when active.
3.5.1.38
Only one indicator shall be active at a given time for a specific diagnostic and no
indicators shall flash when active.
3.5.1.39
The diagnostic indicators on the main window and subsystems window shall summarize
all diagnostic conditions associated with each entry in the window. In general, an active “OK” indicator
indicates no positive diagnostic results currently exist within the building or subsystem, as applicable for
the window. An active “Caution” indicator indicates that at least one potential problem currently exists
within the building or subsystem, as applicable, and no confirmed problem currently exists. An active
“Not OK” indicator indicates at least one confirmed problem exists regardless of whether cautionary or
Battelle Northwest, 2003

Page 37

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

non-positive results exist. Essentially, confirmed problems override potential problem indications which
override non-positive results.
3.6

Security
Certain functions of the tool directly available to the user require the user to possess supplementary
privileges associated with performing these functions. These supplementary privileges are possessed by
the administrator user and are in addition to those of the general user as described in 2.5. The tool
determines the type of user by requesting an identifier and password from the user. The requirements
related to this process are discussed in other requirements in this document.

3.7

Other Requirements
The tool shall log to permanent storage the occurrence of changes to the fixed data. The log shall indicate
the time and date of the change, original value of the item(s) changed, and the new value of the item(s)
changed.

Battelle Northwest, 2003

Page 38

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

4.

Version:
1.1
Date: 8/28/2003

Appendix A: Data Flow Diagrams of Diagnostic Processes for Chillers,
Cooling Towers, and Chilled-Water Distribution

Battelle Northwest, 2003

Page 39

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Context Diagram
Diagnose Chiller/Cooling Tower

Metered and Fixed
Equipment Data
0.0
Diagnose
Chiller/
Cooling
Tower
Identification
of
Condition

Battelle Northwest, 2003

Page 40

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

0.0 Diagnose Chiller/Cooling Tower
Metered and Fixed
Equipment Data

3.0
Determine
Equipment
Status

Fixed
Chiller Data

Chiller Equpment
Status
Shared Equpment
Status Data

1.0
Diagnose Chiller

Chiller Condition

Battelle Northwest, 2003

Cooling Tower
Equipment Status

Fixed
Cooling Tower
Data

2.0
Diagnose
Cooling Tower

Cooling Tower Condition

Page 41

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

0.0 Diagnose Chiller/Cooling Tower
Compressor
Motor
Rated Current
(or Power)

Condenser-Pumps
Condenser Pumps
Motor Rated
Current (or Power)
Current (or Power)
CHW Pumps
Motor Rated
Compressor P
Condenser
Current (or Power)
Pumps P
CHW Pumps
Current (or Power)

Compressor
Current
(or Power)

CHW
Pumps P
Secondary CHW Pumps
Motor Rated Current
(or Power)
Secondary CHW
Pumps P
Secondary
CHW Pumps
Current (or Power)

Supply Fan Motors
Rated current
(or Power)

3.0
Determine
Equipment
Status

Supply
Fans P
Supply Fans
Current (or Power)
Condenser
Fans
Current (or Power)
Condenser
Fans P

CHW Transient
Decrease Factor

Condenser Fan Motors
Rated current (or Power)
CT Fan Motors
Rated current
(or Power)
CT Fans P
CT Fans
Current (or Power)

Secondary
CHW Pumps
Status
CHW {Pumps
Status

Ambient

Condenser
Fans
Status

Temperature
CHWST Alarm
OAT
Trigger High
CHWST Alarm
CHWST
CHWST
Trigger Low
CHW Set
Alarm
Point Evaluation
Interval

Supply Fans
Status

Condenser Pumps
Status

Compressor
State
Compressor
Status
CT Fans
Status
Ambient
Temperature
OAT

CHWdUp
CHWdDown
Chiller
Schedule

CT Inlet
CT Range Temperature CT
Sump
Benchmark
Temp

CHWST

Water-side
Economizing
Chiller
Condenser
Type

CT Fans "Off"
Setpoint

1.0
Diagnose
Chiller

CHW Pumps
Max Start-Up
Time
Condenser
Pumps Max
Start-Up Time

CHWST
Alarm
CHWST Mean
Too-High Deviation
CHWST Mean
Too-Low Deviation
Rejected CHWST
for Non-Steady
CHWST

Minimum
Compressor Minimum
On Time Compressor
Off Time

Rejected OAT for
Non-Steady CHWST

Compressor
Off Cycle
OK/not

Compressor
On Cycle OK/not

CT Fans "On"
Setpoint

Ambient
wb Temp

Compressor
Compressor
interlocked
Interlock
With Condenser with CHW
Pumps
OK/not
Fans OK/not

Secondary/
Supply Fans/
Primary
CHW Pumps
CHW Pumps
Interlock OK/not Compressor
Interlock OK/not
interlocked with
Supply
Fans/
Chiller
Condenser
Secondary
Schedule
Pumps OK/not
CHW Pumps
ok/not
Interlock OK/not

Battelle Northwest, 2003

Min. CT Fans On Time

2.0
Diagnose
Cooling
Tower

Min. CT Fans Off Time
Current Time

CT Range
OK/Not

Rejected CT Range for
CT Fans Status Off and/or
Sump Temp Below the
CT Fans "On" Setpoint

Rejected Ambient wb
Temp Points for Fans Status Off
and/or for Sump Temp Below
the CT Fans "On" Setpoint
Rejected CT Approach and Ambient
wb Temp Points for CT Fans
Status Off and/or for CT Sump Temp
Below the CT Fans "On" Setpoint
Rejected CT Approach and
Ambient wb Temp
When Condenser Pumps are "Off"

CT Approach
CT Cycling
OK/Not
OK/Not

Sump Temp
Control
OK/Not

Rejected CT
Fans Current When
Condenser Pumps are "Off"

CT Fans
Staging
OK/Not

Rejected CT
Sump Temp When
Condenser Pumps are "Off"
Rejected CT
Range When
Condenser
Pumps are "Off"

Rejected Ambient
wb Temp
When Condenser
CT Fans/ Pumps are "Off"
Condenser
Rejected Sump
Pumps Interlock
Temp When
OK/Not
Condenser Pumps are "Off"

Page 42

Rejected Ambient wb
Temp When
Condenser
Pumps are "Off"

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

1.0 Diagnose Chiller
Chiller
Schedule

Minimum Compressor
Off Time

1.1
Diagnose
Chiller
Schedule

Minimum Compressor
On Time
Chiller
Schedule
ok/not

1.3
Diagnose
Chiller
Cycling

inputs

Compressor
On Cycle OK/not
Compressor
Off Cycle
OK/not

Compressor
Status

CHWST CHWST Mean
Alarm Too-High Deviation
CHWST
CHWST Mean
Too-Low Deviation
Ambient
Temperature
Rejected CHWST
OAT
for Non-Steady
1.2
CHWST
Check
Rejected OAT
Chilled
for
Non-Steady
CHWST Alarm
Water
CHWST
Trigger Low
Control
CHWdDown
CHWST Alarm
Trigger High

CHWdUp
CHW Set
Point
CHWST Alarm
Evaluation Interval Compressor
State

Battelle Northwest, 2003

Compressor
interlocked Compressor Interlock
with CHW
With Condenser
Pumps OK/not
Fans OK/not

Supply
Fans Status
Condenser
Fans Status
Secondary
CHW
Pumps Status
CHW
Pumps Status

Compressor
interlocked with
Condenser
Pumps OK/not Supply Fans/
CHW Pumps
Interlock OK/not

Condenser Pumps
Status

1.5
Diagnose
Interlocks

Water-side
Economizing

Supply Fans/
Secondary
CHW Pumps
Interlock OK/not

Secondary/Primary
CHW Pumps
Interlock OK/not

Chiller
Condenser
Condenser
Type
Pumps
CHW Pumps
Max StartMax Start-Up
Up Time
Time

Page 43

1.6
Diagnose
Chiller
Performance
(Placeholder)

Performance
Assessment

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

1.1 Diagnose Chiller
Schedule

Compressor
Status

1.1.1
Evaluate
Compressor
Power vs.
Time
Chiller
Schedule

Battelle Northwest, 2003

Chiller
Schedule
ok/not

Page 44

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

1.1.1 Evaluate Compressor Power
vs. Time

Compare the current time to the scheduled time for the chiller to be on.,
If the current time is a scheduled chiller "on" time, then stop--make no further check. OK.
If the current time is outside the scheduled chiller "on" times (i.e., the chiller should be off),
then check if the Compressor Status = "Off."
If the Compressor Status = "Off," then the chiller is off as it should be and it is OK.
Set Chiller Schedule OK/Not = "OK".
If the Compressor Status = "On," then the Chiller is "On" when it should be off. Not
OK. Energy is being wasted. Set Chiller Schedule OK/Not = "Not OK"

Note: The purpose of this process is to determine if the chiller is on when it is supposed to be off.

Ref. File: 1.2 Chiller schedule diagnostics.doc

Battelle Northwest, 2003

Page 45

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

1.2 Check Chilled Water
Control

CHWST

CHWST Steady
State CHW

Ambient
Temperature

Compressor
State

1.2.1
Filter for
Compressor
State

CHWST
Alarm
CHWST Mean
Too-High Deviation
CHWST Alarm
Trigger Low

Rejected CHWST
Rejected OAT for Non-Steady
CHWST
for Non-Steady
CHWST

CHWST Alarm
Trigger High
CHWST Alarm
Evaluation Interval

Battelle Northwest, 2003

1.2.2
Evaluate
Steady-State
CHWST
Control

CHWST Mean
Too-Low Deviation

CHWdDown
CHW Set
Point
CHWdUp

Page 46

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

1.2.1 Filter (pass) CHWST Steady State "On"
Only

If Compressor State = "Steady", then pass values of CHWST.
Label these passesd values CHWST Steady State CHW.
If Compressor State = "Transient" or Compressor State = "Off", then
reject values of CHWST.

Battelle Northwest, 2003

Page 47

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

1.2.2 Evaluate Steady-State CHWST Control
CHWST Mean
Too-High Deviation
CHWST Steady
State CHW
CHW Set Point

1.2.2.1
Evaluate
CHWST
Variation at
Single Points

CHWST Mean
Too-Low Deviation

CHWST Deviation
1.2.2.3
Determine
CHWST
Statistics

CHWST Maintained
OK/not

CHWdUp

CHWST
Alarm

CHWdDown

1.2.2.2
Evaluate
CHWST
Variation
Alarm
Conditions
CHWST Alarm
Evaluation Interval
CHWST Alarm
Trigger Low CHWST Alarm
Trigger High

Battelle Northwest, 2003

Page 48

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

1.2.2.1 Evaluate CHWST Variation at Single
Points
Calculate the upper bound for acceptable Chilled Water Temperature using
CHWST Upper Bound = CHW Setpoint + (CHWdUp)
Calculate the acceptable lower bound for the Chilled Water Temperature using
CHWST Lower Bound = CHW Setpoint - (CHWdDown).
Compare the Chilled Water Supply Temperature (CHWST) for steady state to the CHWST Upper Bound and
CHWST Lower Bound.
If CHWST Steady State CHW > CHWST Upper Bound, then
set CHWST Maintained OK/not = "Too high" for the current time.
If CHWST Steady State CHW <= CHWST Upper Bound
and CHWST Steady State CHW>= CHW Lower Bound,
then
set CHWST Maintained OK/not = "OK" for the current time.
If CHWST Steady State CHW < CHWST Lower Bound, then
set CHWST Maintained OK/not = "Too low" for the current time.
Calculate the CHW Temperature Deviation for a single point (current time)
CHWST Deviation = CHWST Steady State CHW - CHW Setpoint.

Ref file: 2.1CHW temperature control.doc
Battelle Northwest, 2003

Page 49

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

1.2.2.2 Evaluate CHWST Variation Alarm
Conditions

CHWST Maintained
OK/not

1.2.2.2.1
Update
CHWST Alarm
Variables

CHWSTNumber
High

CHWST Alarm
Trigger High
CHWST Alarm
Trigger Low

CHWSTNumber
Low

CHWST Alarm
Evaluation Interval
Battelle Northwest, 2003

1.2.2.2.2
Evaluate
Alarm
Conditions

CHWST Alarm

Page 50

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

1.2.2.2.1 Update CHWST Alarm Variables
Update the variable CHWST Maintained OK/not Array
Update all values in the array, adding the current value of CHWST Maintained OK/not to the
array and by dropping the oldest value of CHWST Maintained OK/not from the array.
Update values for CHWSTNumber High and CHWSTNumber Low.
Set CHWSTNumber High = number of values "Too High" appearing in CHWST Maintained OK/not
Array.
Set CHWSTNumber Low = number of values "Too Low" appearing in CHWST Maintained OK/not
Array.
[Determine whether this evaluation should be done during initial start-up processing (this shouldn't really be
part of the DFDs because it represents intialization and control),
If Total Number of Time Steps Processed < CHWST Alarm Evaluation Interval, then
terminate processing of 2.8.2 (i.e., do not evaluate CHWST Variation Alarm Conditions).
Otherwise, continue with 2.8.2 processing.]

Ref file: 2.1CHW temperature control.doc

Battelle Northwest, 2003

Page 51

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

1.2.2.2.2 Evaluate Alarm Conditions
Calculate values for CHWSTFraction High and CHWSTFraction Low.
CHWSTFraction High =
CHWSTFraction Low

CHWSTNumber High/(CHWST Alarm Evaluation Interval)

= CHWSTNumber Low/(CHWST Alarm Evaluation Interval)

Compare CHWSTFraction High with CHWST Alarm Trigger High.
Compare CHWSTFraction Low with CHWST Alarm Trigger Low.
If CHWSTFraction High >= CHWST Alarm Trigger High, then
set CHWST Alarm = "Too High."
If CHWSTFraction High < CHWST Alarm Trigger High and CHWSTFraction Low < CHWST
Alarm Trigger Low, then
set CHWST Alarm = "OK".
If CHWSTFraction Low >= CHWST Alarm Trigger Low, then
set CHWST Alarm = "Too Low."

Notes: Conclusions regarding a fault existing or not based on individual points are likely to be
unrealiable. Conclusions are likely to best be made by considering a high percentage of points over
some period of time exceeding some minimum time, e.g., a day or a week (24 hours or 168 hours).
Therefore, we base the assignment of CHWST Alarm on a minimum set of points rather than individual
points.
Ref file: 2.1CHW temperature control.doc
Battelle Northwest, 2003

Page 52

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

1.2.2.3 Determine CHWST Statistics*
If CHWSTAlarm = Too High, then
Calculate mean CHWST for the times correspoding to the too-high points in the CHWST
Maintained OK/not Array.
CHWST Mean Too-High Deviation = Sum [CHWST Deviation(time index)]/
(CHWSTNumber High),
where time index takes values between the currrent time and (CHWST Alarm Evaluation
Interval - 1) time steps ago and the sum only includes values of CHWST Deviation
for which CHWST Maintained OK/not = "Too High".
Set Mean Too Low CHWST Deviation = null.

If CHWSTAlarm = Too Low, then
Calculate mean CHWST for the times correspoding to the too-low points in the CHWST
Maintained OK/not Array.
CHWST Mean Too-Low Deviation =

Sum [CHWST Deviation(time index)]/
(CHWSTNumber Low),

where time index takes values between the currrent time and (CHWST Alarm Evaluation
Interval - 1) time steps ago and the sum only includes values of CHWST Deviation for
which CHWST Maintained OK/not = "Too Low".
Set Mean Too High CHWST Deviation = null.

Note: This process is proposed for Round 2. Also, additional or other statistics could be calculated in
this process. These should also be proposed for Round 2.

Battelle Northwest, 2003

Page 53

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

1.3 Diagnose Chiller Cycling

Minimum Compressor
Off Time
Minimum Compressor
On Time

1.3.1
Evaluate
compressor
current (or
power) vs time

Compressor
Status

Battelle Northwest, 2003

Compressor
On Cycle OK/not

Compressor
Off Cycle
OK/not

Page 54

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

1.3.1 Evaluate Compressor current (or power) vs time
If Compressor Status = "On" and Last Compressor Status = "On", then terminate this evaluation. Nothing new to
check.
If Compressor Status = "On" and Last Compressor Status = "Off," then set Last Compressor Switch On Time = Current
Time and check Last Compressor Off Interval.
Calculate the Last Compressor Off Interval using
Last Compressor Off Interval = Last Compressor Switch On Time - Last Compressor Switch Off Time
If Last Compressor Off Interval >= Minimum Compressor Off Time, then set Compressor Off Cycle OK/not =
"OK."
If Last Compressor Off Interval < Minimum Compressor Off Time, then set Compressor Off Cycle OK/not =
"not OK." The compressor is not staying off long enough during cycling. Possible causes include an
incorrectly specified minimum off time in the control algorithm or for compressors with minimum on/off times
controlled by a relay a failed relay or one requiring adjustment.
If Compressor Status = "Off" and Last Compressor Status = "Off," then terminate this evaluation. Nothing new to check.
If Compressor Status = "Off" and Last Compressor Status = "On", then set Last Compressor Switch Off Time = Current
Time and check Last Compressor On Interval.
Calculate the Last Compressor On Interval using
Last Compressor On Interval = Last Compressor Switch Off Time - Last Compressor Switch On Time
If Last Compressor On Interval >= Minimum Compressor On Time, then Compressor On Cycle OK/not =
"OK."
If Last Compressor On Interval < Minimum Compressor On Time, then Compressor On Cycle OK/not =
"not OK." The compressor is not staying on long enough during cycling. Possible causes include an
incorrectly specified minimum on time in the control algorithm or for compressors with minimum on/off times
controlled by a relay a failed relay or one requiring adjustment.
Update Last Compressor Status : Set Last Compressor Status = Compressor Status*
*This over-writes previous compressor status with current status and should not be performed if previous status is
required in subsequent processing.
Ref: 4.x chiller cycling.doc

Battelle Northwest, 2003

Page 55

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

1.5.0 Diagnose Interlocks

Supply Fan
Status

Supply Fans/CHW
Pumps Interlock OK/not

Secondary CHW
Pumps Status
CHW Pumps
Status

1.5.2
Diagnose CHW
Interlocks

Condenser Fans
Status
Condenser Pumps
Status
Compressor
Status

Condenser Pumps
Max Start-Up Time

1.5.1
Diagnose
Chiller
Interlocks

Compressor
interlocked with
Condenser Pumps
OK/not

Secondary/Primary
CHW Pumps
Interlock OK/not
Supply Fans/Secondary
CHW Pumps
Interlock OK/not

Compressor Interlock
With Condenser
Fans OK/not

Chiller Condenser
Type
CHW Pumps
Max Start-Up
Time
Water-side
Economizing

Compressor
interlocked with
CHW Pumps
OK/not

Battelle Northwest, 2003

Page 56

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

1.5.1.1 Verify Proper Condenser Pumps/Compressor Interlock

Compressor Interlock
With Condenser
Pumps OK/not

Chiller Condenser
Type

Condenser Pumps
Max Start-Up Time

1.5.1.1.1
Evaluate
Condenser
Pumps Power
vs Compressor
Power

Compressor
Status
Last
Compressor Status

Condenser Pumps
Last Time
Turned On
Last Condenser
Pumps Status
Condenser Pumps
Status

Battelle Northwest, 2003

1.5.1.1.2
Update Last
Compressor
and Pumps
Status

Page 57

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

1.5.1.1.1 Evaluate Condenser
Pumps Power vs Compressor Power
If Chiller Condenser Type = Air-Cooled, then terminate this analysis.
If Chiller Condenser Type = Water-cooled, then

compare the compressor status and condenser-pumps status for the current time.
If the Compressor Status = "On" and the Condenser-Pumps Status = "On," then Compressor
Interlock With Condenser Pumps OK/not = "OK"
If the Compressor Status = "Off" and the Condenser-Pumps Status = "Off," then Compressor
Interlock With Condenser Pumps OK/not = "OK," unless
the Compressor Status = "Off" and Last Compressor Status = "Off," and current Condenser
Pumps Status = "Off" and Last Condenser Pumps Status = "On", then the condenser pumps
are cycling (turning on and off) unnecessarily and Compressor Interlock With Condenser
Pumps OK/not = "Not OK. Repeated frequent cycling will shorten the life of the condenser
pumps."
If the Compressor Status = "On" and the Condenser-Pumps Status = "Off," then Compressor
Interlock With Condenser Pumps OK/not = "not OK." The chiller cannot reject heat and this could
result in damage to the compressor.
If the Compressor Status = "Off" and the Condenser-Pumps Status = "On," then further evaluation is
required
.
If Current Time - Condenser Pumps Last Time Turned On <= Condenser Pumps Max StartUp Time,then Compressor Interlock With Condenser Pumps OK/not = "OK" (for now; actually
this corresponds to no fault detected).
If Current Time - Condenser Pumps Last Time Turned On > CondenserPumps Max Start-Up
Time, then Compressor Interlock With Condenser Pumps OK/not = "Not OK." The condenser
pumps are turning on too much in advance of the chiller and wasting energy.

Battelle Northwest, 2003

Page 58

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

1.5.1.1.2 Update Last Compressor and Pumps
Status
If Condenser Pumps Status = "On" and Last Condenser Pumps Status = "Off", then
set Condenser Pumps Last Time Turned On = Current Time.
Otherwise, do not change Condenser Pumps Last Time Turned On, i.e.,
set Condenser Pumps Last Time Turned On = Condenser Pumps Last Time Turned On.
Then,
Set Last Compressor Status = Compressor Status.*
Set Last Condenser-Pumps Status = Condenser-Pumps Status.*
*These actions over-write the previous statuses and should not be performed if the previous statuses are required
in subsequent processing.

Battelle Northwest, 2003

Page 59

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

1.5.1.2.1 Evaluate Condenser
Fans Power vs Compressor Power

If Chiller Condenser Type = Water-Cooled, terminate this analysis.
If Chiller Condenser Type = Air-cooled, then
Compare the compressor status and condenser-fan status for the current time.
If the Compressor Status = "On" and the Condenser-Fans Status = "On," then Compressor Interlock With
Condenser Fans OK/not = "OK"
If the Compressor Status = "Off" and the Condenser-Fans Status = "Off," then Compressor Interlock With
Condenser Fans OK/not = "OK."
If the Compressor Status = "On" and the Condenser-Fans Status = "Off," then Compressor Interlock With
Condenser Fans OK/not = "Not OK." The chiller cannot reject heat and this could result in damage to
the compressor.
If the Compressor Status = "Off" and the Condenser-Fans Status = "On," then Compressor Interlock With
Condenser Fans OK/not = "Not OK." The fans are running unnecessarily and wasting energy.

Battelle Northwest, 2003

Page 60

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

1.5.1.3 Verify Proper CHW
Pumps/ Compressor Interlock
Compressor
interlocked with
CHW Pumps
OK/not

CHW Pumps
Max Start-Up Time

Water-side Economizing

1.5.1.3.1
Evaluate CHW
Pumps Current (or
Power) vs.
Compressor
Current (or
Power)

Compressor
Status
Last
Compressor Status
CHW Pumps Last
Time Turned On

CHW Pumps
Status

Last CHW
Pumps Status

1.5.1.3.2
Update Last
Compressor
and CHW
Pumps Status

Note:
Applies to both aircooled and watercooled chillers.

Battelle Northwest, 2003

Page 61

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

1.5.1.3.1 Evaluate Chilled Water Pumps
Power vs. Compressor Power
Compare the chiller status and chilled water pumps status for the current time.
If the Compressor Status = "On" and the CHW Pumps Status = "On," then Compressor Interlock With
CHW Pumps OK/not = "OK"
If the Compressor Status = "Off" and the CHW Pumps Status = "Off," then Compressor Interlock With
CHW Pumps OK/not = "OK," unless
the Compressor Status= "Off" and Last Compressor Status = "Off," and current CHW Pumps Status
= "Off" and Last CHW Pumps Status = "On", then the condenser pumps are cycling (turning on
and off) unnecessarily and Compressor Interlock With CHW Pumps OK/not = "Not OK."
Repeated frequent cycling will shorten the life of the CHW Pumps.
If the Compressor Status = "On" and the CHW-Pumps Status = "Off," then Compressor Interlock With
CHW Pumps OK/not = "not OK." The chiller is operating without a load. Energy is being wasted and
damage to the chiller may result.
If the Compressor Status = "Off" and the CHW-Pumps Status = "On," then further evaluation is
required.
If Water-Side Economzing = "Yes", then Compressor Interlock With Condenser Pumps OK/not =
"OK" (as far as we can tell).
If Water-Side Economzing = "No", and
If Current Time - CHW Pumps Last Time Turned On <= CHW Pumps Max Start-Up
Time, then Compressor Interlock With CHW Pumps OK/not = "OK" (for now; actually
this corresponds to no fault detected).
If Current Time - CHW Pumps Last Time Turned On > CHW Pumps Max Start-Up
Time, then Compressor Interlock With CHW Pumps OK/not = "Not OK." The CHW
pumps are turning on too much in advance of the chiller and wasting energy.

Note: Applies to both water-cooled and air-cooled chillers.

Ref. File: 5.3.2 CHW Pumps interlock.doc

Battelle Northwest, 2003

Page 62

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

1.5.1.3.2 Update Last Compressor and CHW Pumps
Status
If CHW Pumps Status = "On" and Last CHW Pumps Status = "Off", then
set CHW Pumps Last Time Turned On = Current Time.
Otherwise, do not change CHW Pumps Last Time Turned On, i.e.,
set CHW Pumps Last Time Turned On = CHW Pumps Last Time Turned On.
Then,
set Last Compressor Status = Compressor Status.*
and
set Last CHW Pumps Status = CHW Pumps Status.
*This overwrites the previous status and should not be performed if subsequent processing requires the previous
status.

Battelle Northwest, 2003

Page 63

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

1.5.2 Diagnose CHW Interlocks
Supply Fans/CHW
Pumps Interlock OK/not

CHW Pumps
Status

1.5.2.1
Verify Supply
Fans/CHW
Pumps
Interlock

1.5.2.3
Verify
Secondary/
Primary CHW
Pumps
Interlock

Supply Fans
Status

1.5.2.2
Verify Supply
Fans/
Secondary
Pumps
Interlock

Secondary/Primary
CHW Pumps
Interlock OK/not

Secondary CHW
Pumps Status

Supply Fans/Secondary
CHW Pumps
Interlock OK/not

Battelle Northwest, 2003

Page 64

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

1.5.2.1 Verify Supply Fans/CHW
Pumps Interlock

Supply Fans
Status

CHW Pumps
Status
1.5.2.1.1
Evaluate Supply
Fans
Current (or
Power)
vs CHW Pumps
Current (or
Power)

Battelle Northwest, 2003

Supply Fans/CHW
Pumps Interlock OK/not

Page 65

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

1.5.2.1.1 Evaluate Supply Fans Current (or Power) vs
Primary CHW Pumps Current (or Power)

For each set of primary CHW Pumps, Compare the CHW Pumps Collective Status and Supply Fan Status for the
supply fans for each air handler served by this set of specific CHW Pumps.
If the CHW Pumps Collective Status = "On" and the Supply Fan Status = "On" for at least one of the air
handlers served by this CHW Pumps, then set the Supply Fans/CHW Pumps Interlock OK/not for this set of
CHW Pumps = "OK."
If the CHW Pumps Collective Status = "Off" and the Supply Fan Status = "Off" for all of the air handlers
served by this set of CHW Pumps, then set the Supply Fans/CHW Pumps Interlock OK/not for this CHW
Pumps="OK."
If the CHW Pumps Collective Status = "Off" and the Supply Fan Status = "On" for at least one of the air
handlers served by this set of CHW Pumps, then set the Supply Fans/CHW Pumps Interlock OK/not for this
set of CHW Pumps = "Possible problem with supply fan control--check to see if loads in the spaces served
are being met for supply fans with Supply Fans Status = "On" that are part of air handlers served by
these CHW Pumps. Occupant complaints about temperature or stuffiness may be in indicator of the
load not being met.

If the CHW Pumps Collective Status = "On" and the Supply Fan Status = "Off" for all of the air handlers
served by this set of CHW Pumps, then set the Supply Fans/CHW Pumps Interlock OK/not for this
CHW Pumps = "Not OK." These CHW Pumps is operating unnecessarily and is wasting energy.
The CHW Pumps should not operate unless at least one of the supply fans in an air handler served
by these CHW Pumps is on.

Notes: This diagnostic can be applied to current (or power) measured for each supply fan individually or to the
collective current for all supply fans served by a CHW pump together.
Equipment status is determined in Process 7.0.

Ref. File: 5.8 supply fan-CHW pump interlock.doc

Battelle Northwest, 2003

Page 66

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

1.5.2.2 Verify Supply Fans/
Secondary Pumps Interlock

Supply Fans Status

Secondary CHW
pumps Status

1.5.2.2.1
Evaluate Supply
Fans
Current (or Power)
vs
Secondary CHW
pumps
Current (or Power)

Battelle Northwest, 2003

Supply Fans/Secondary
CHW pumps Interlock OK/not

Page 67

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

1.5.2.2.1 Evaluate Supply Fans Current (or Power) vs
Secondary CHW pumps Current (or Power)
For chilled-water distirbution systems with secondary CHW pumps.
For each secondary set of CHW pumps,
compare the Secondary CHW pumps Collective Status and Supply Fans Status for the supply fans for each
air handler served by this specific secondary CHW pump.
If the Secondary CHW pumps Collective Status = "On" and the Supply Fans Status = "On" for at
least one of the air handlers served by this set of secondary CHW pumps, then set the Supply
Fans/Secondary CHW Pumps Interlock OK/not for this set of secondary CHW pumps = "OK."
If the Secondary CHW pumps Collective Status = "Off" and the Supply Fans Status = "Off" for all of
the air handlers served by this set of secondary CHW pumps, then set the Supply Fans/Secondary
CHW Pumps Interlock OK/not for this set of secondary CHW pumps = "OK."
If the Secondary CHW pumps Collective Status = "Off" and the Supply Fans Status = "On" for at
least one of the air handlers served by this set of Secondary CHW pumps, then set the Supply
Fans/Seondary CHW Pumps Interlock OK/not for this set of secondary CHW pumps = "Possible
problem with supply fan control--check to see if loads in the spaces served are being met" for supply
fans with Supply Fans Status = "On" that are part of air handlers served by this set of secondary
CHW Pumps.
If the Secondary CHW pumps Collective Status = "On" and the Supply Fans Status = "Off" for all of
the air handlers served by this set of Secondary CHW pumps, then set the Supply Fans/Secondary
CHW Pumps interlock OK/not for this set of secondary CHW pump = "Not OK." This set of
secondary CHW pumps is operating unnecessarily and is wasting energy. The set of secondary
CHW pumps should not operate unless at least one of the supply fans in an air handler served by
this set of secondary CHW pumps is on.

Notes: This diagnostic can be applied to current (or power) measured for each supply fan individually or to the
collective current for all supply fans served by a set of secondary CHW pump togethers.
Equipment status is determined in Process 7.0.

Ref. File: 5.10 supply fan-2ndary CHW pump interlock.doc

Battelle Northwest, 2003

Page 68

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

1.5.2.3 Verify Secondary/Primary
CHW Pumps Interlock

Secondary CHW
pumps Status

CHW
pumps Status

1.5.2.3.1
Evaluate Secondary
CHW pumps
Current
(or Power) vs
Primary
CHW pumps
Current (or Power)

Battelle Northwest, 2003

Secondary/Primary
CHW Pumps Interlock OK/not

Page 69

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

1.5.2.3.1 Evaluate Secondary CHW pumps Current
(or Power) vs Primary CHW Pumps Current (or Power)
For each set of primary CHW pumps,
For each set of secondary CHW pumps served by the selected set of primary CHW Pumps,
Compare the primary CHW Pumps Collective Status and Secondary CHW pumps Collective Status
for each set of secondary CHW pump served by this specific set of primary CHW Pumps.
If the primary CHW pumps Collective Status = "On" and the Secondary CHW pump Status =
"On" for at least one of the secondary CHW pumps served by this set of primary CHW
pumps, then set Secondary/Primary CHW Pumps Interlock OK/not for this set of primary
CHW pump = "OK."
If the primary CHW pumps Collective Status = "Off" and the Secondary CHW pump Status =
"Off" for all of the secondary CHW pumps served by this set of primary CHW pumps, then set
Secondary/Primary CHW Pumps Interlock OK/not for this set of primary CHW pumps = "OK."
If the primary CHW pumps Collective Status = "Off" and the Secondary CHW pump Status =
"On" for at least one of the secondary CHW pumps served by this set of primary CHW
pumps, then set Secondary/Primary CHW Pumps Interlock OK/not for this set of primary
CHW pumps = "Not OK." The secondary CHW pumps that are one are wasting energy.
Secondary CHW pumps should only operate when the set of primary CHW pumps is
operating.
If the primary CHW Pumps Collective Status = "On" and the Secondary CHW pump Status =
"Off" for all of the secondary CHW pumps served by this set of primary CHW pumps, then set
Secondary/Primary CHW Pumps Interlock OK/not for this set of primary CHW pumps = "Not
OK." This set of primary CHW pumps is operating unnecessarily and is wasting energy. The
set of primary CHW pump should not operate unless at least one of the secondary CHW
pumps served by this set of primary CHW pumps is on.

Notes: This diagnostic can be applied to current (or power) measured for each secondary CHW pump individually
or to the collective current for all secondary CHW pumps served by a CHW pump together.
Equipment status is determined in Process 7.0.

Ref. File: 5.9 secondary CHWP interlock.doc

Battelle Northwest, 2003

Page 70

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

1.6.0 Diagnose Chiller Performance
Placeholder only for Round 2.
Chiller Performance is a candidate for development of diagnostics for Round 2.
Enforma help suggests 4 plots that may be useful for Chiller Performance Diagnostics:
ü Compressor Power vs. Ambient Temperature
ü Compressor Power vs. Condenser Inlet Temperature (cooling tower outlet temperature)
ü Compressor Power vs. Chiller Delta T
ü Compressor Power vs. Chiller Inelt Temperature

Battelle Northwest, 2003

Page 71

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

2.0 Diagnose Cooling Tower

CT Inlet
Temperature

2.1
Diagnose
Cooling
Tower
Interlocks

Condenser
Pumps Status

CT
Sump
Temp

CT
Fans Status

Min. CT Fans Off Time
Current Time

2.2
Diagnose
Cooling
Tower
Control/
Cycling

CT Cycling
CT Approach OK/Not
OK/Not
Sump Temp
Control
OK/Not

Rejected CT
Range When
Condenser Pumps are "Off"
Rejected Sump Temp When
Condenser Pumps are "Off"

2.3
Diagnose
Cooling
Tower
Capacity

Condenser
Pumps Status

CT Fans/
Condenser
Pumps Interlock
OK/Not

Min. CT Fans On Time

Rejected CT Range for
Rejected Ambient wb
CT Fans Status Off and/or
Temp Points for Fans Status Off Sump Temp Below the
and/or for Sump Temp Below CT Fans "On" Setpoint
the CT Fans "On" Setpoint
Rejected CT
Fans Current When
CT Range
Condenser Pumps are "Off"
Benchmark

Rejected Ambient wb
Temp When Condenser
Pumps are "Off"
CT Fans
CT Range Staging
OK/Not
OK/Not

Ambient
wb Temp
CT Fans "On"
Setpoint

CT Fans "Off"
Setpoint

Rejected CT Approach and Ambient
wb Temp Points for CT Fans
Status Off and/or for CT Sump Temp
Below the CT Fans "On" Setpoint
Rejected CT Approach and
Ambient wb Temp
When Condenser Pumps are "Off"

Rejected CT
Sump Temp When
Condenser Pumps are "Off"
Rejected Ambient wb
Temp When
Condenser Pumps are "Off"

Battelle Northwest, 2003

Page 72

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

2.1 Diagnose Cooling Tower
Interlocks

Condenser
Pumps Status

CT Fans Status
2.1.1
Evaluate CT
Fans Status vs.
Condenser
pumps Status
CT Fans/Condenser
Pumps
Interlock
OK/Not

Battelle Northwest, 2003

Page 73

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

2.1.1 Evaluate CT Fans Status vs.
Condenser Pumps Status
Compare the CT Fans Status and Condenser Pumps Status for the current time.
If the CT Fans Status = "On" and the Condenser Pumps Status = "On," then CT Fans/Condenser
Pumps Interlock OK/Not = "OK"
If the CT Fans Status = "Off" and the Condenser Pumps Status = "Off," then CT Fans/Condenser
Pumps Interlock OK/Not = "OK."
If the CT Fans Status = "On" and the Condenser Pumps Status = "Off," then CT Fans/Condenser
Pumps Interlock OK/Not = "Not OK." The CT Fans must be off when the condenser pumps are off,
otherwise energy is being wasted.
If the CT Fans Status = "Off" and the Condenser Pumps Status = "On," then CT Fans/Condenser
Pumps Interlock OK/Not = "OK." The cooling tower Fans may be off when the condenser pumps are
running, but this should not always be the case.

Note: This process uses as inputs the CT Fans Status and the Condenser Pumps Status that are determined in
Process 7.0.
Values of CT Fans/Condenser Pumps Interlock OK/Not = "OK" should be interpretted more precisely as "no
problem has been detected with this interlock." It is possible that no problem is detected under current
conditions,yet an interlock problem exists. This is particularly true when CT Fans Status = "Off" and Condenser
Pumps Status = "On," which while OK under some condtions is not always OK. Additional diagnostics would be
useful here.

Ref. File: 1.22 Evaluate Plot of CT Fan vs. CCP

Battelle Northwest, 2003

Page 74

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

2.2 Diagnose Cooling Tower
Temperature Control/Cycling
Sump Temp
Control
OK/Not
Rejected CT
Sump Temp When
Condenser Pumps are "Off"

CT Fans "Off"
Setpoint

2.2.1
Diagnose
Sump
Temperature
Control

Condenser Pumps
Status

Ambient wb
Temp

Rejected Ambient wb
Temp When
Condenser Pumps are "Off"

CT Fans "On"
Setpoint

CT Fans
Status

2.2.3
Diagnose CT
Based On
Approach
Rejected CT Approach
and Ambient wb Temp
When Condenser Pumps
are "Off"

CT
Sump Temp

CT Approach
OK/Not

Rejected CT Approach and
Ambient wb Temp Points
for CT Fans Status Off and/or for
CT Sump Temp Below
the CT Fans "On" Setpoint

Battelle Northwest, 2003

Current
Time

2.2.2
Diagnose
Cooling
Tower
Cycling

Min. CT Fans On Time
Min. CT Fans Off Time

Page 75

CT Cycling
OK/Not

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

2.2.1 Diagnose Sump Temperature Control

CT Fans "Off"
Setpoint
CT Fans "On"
Setpoint
CT Sump
Temp
Ambient wb
Temp

Passed (Filtered) CT
Sump Temp

2.2.1.1
Filter CT Sump
Temp and
Ambient wb
Temp for Times
When Condenser
Pumps are "On"

2.2.1.2
Evaluate
Filtered CT
Sump Temp vs.
Filtered Ambient
wb Temp

Passed (Filtered)
Ambient wb
Temp

Sump Temp
Control
OK/Not

Condenser Pumps
Status
Rejected CT
Sump Temp When
Condenser Pumps are "Off"
Rejected Ambient wb
Temp When
Condenser Pumps are "Off"

Battelle Northwest, 2003

Page 76

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

2.2.1.1 Filter CT Sump Temp and
Ambient wb Temp for Times When
Condenser Pumps are On

For each triplet of (Condenser Pumps Status, CT Sump Temperature, and Ambient wb
Temperature)
reject (i.e., filter out) those triplets for which Condenser Pumps Status = off.
pass those triplets for which Condenser Pumps status = on.

Battelle Northwest, 2003

Page 77

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

2.2.1.2 Evaluate Filtered CT Sump Temp vs. Filtered Ambient
wb Temp
Determine if CT fans are on when Sump Temp is above its on setpoint
If Sump Temperature > CT Fans On Setpoint and CT Fans Status = "On,"
then set Sump Temp Control OK/Not= "OK"
If Sump Temperature > CT Fans On Setpoint and CT Fans Status = "Off,"
then set Sump Temp Control OK/Not= "Not OK. The CT fans are off but should be on."
Possible causes include:
control problem
sump temperature sensor problem
electrical problem (motor failure)
other problems with the fan motor
Determine if CT fans are off when sump Temp is below the off setpoint
If Sump Temperature <= CT Fans Off Setpoint and CT Fans Status = "On,"
then set Sump Temp Control OK/Not= "Not OK. The CT fans are on but should be off."
Possible causes include:
control problem
actuator or relay problem
If Sump Temperature <= CT Fans Off Setpoint and CT Fans Status = "Off,"
then set Sump Temp Control OK/Not= "OK."

Ref. File: 2.1.1 Sump Temperature Control Diagnostics

Battelle Northwest, 2003

Page 78

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

2.2.2 Diagnose Cooling Tower Cycling

Min. CT Fans
On Time
Min. CT Fans
Off Time

CT Fans
Status
Current
Time

2.2.2.1
Evaluate CT
Fans Cycling
Times
CT Cycling
OK/Not

Battelle Northwest, 2003

Page 79

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

2.2.2.1 Evaluate CT Fans Cycling Times
Determine if new cycling information is available to analyze (fans currently on).
If CT Fans Status = "On" and Last CT Fans Status = "On," then terminate this evaluation. There is nothing new to check.
If CT Fans Status = "On" and Last CT Fans Status = "Off," then set Last CT Fans On Time = Current Time and check Last CT Fans Off
Interval.
If Last CT Fans Off Interval >= Minimum CT Fans Off Time, then CT Cycling OK/Not = "OK."
If Last CT Fans Off Interval < Minimum CT Fans Off Time, then CT Cycling OK/Not = "Not OK." The CT fans are not staying off
long enough during cycling.
Possible causes include::
The timer that is supposed to eliminate short cycling is not working properly.
The "on" and "off" control setpoints for the fans are too close to one another.
Possible corrective actions include:
Check the control algorithm for the fans if it is controlled by software. Increase the minimum off time in the
software, as necessary, to meet the manufacturers specification for minimum off time.
Check the performance of the time-delay relay. Energize the relay and manually time the delay until action.
Compare the measured time with the specification. Replace or adjust the relay if it is out of spec.
Determine if new cycling information is available to analyze (fans currently off).
If CT Fans Status = "Off" and Last CT Fans Status = "Off," then terminate this evaluation. There is nothing new to check.
If CT Fans Status = "Off" and the Last CT Fans Status = "On," then set Last CT Fans Off Time = Current Time and check Last Fan On
Interval.
If Last CT Fans On Interval >= Minimum CT Fans On Time, then CT Cycling OK/Not = "OK."
If Last CT Fans On Interval < Minimum CT Fans On Time, then CT Cycling OK/Not = "Not OK." The CT fans are not staying on
long enough during cycling.
Possible causes include:
The timer that is supposed to eliminate short cycling is not working properly.
The "on" and "off" control setpoints for the fans are too close to one another.
The cooling tower capacity is too great for the load, so the fans rapidly cycle off (i.e., the on time is very short)
because the load is met quickly.
Possible corrective actions include:
Check the control algorithm for the fans if it is controlled by software. Increase the minimum off time in the
software, as necessary, to meet the manufacturers specification for minimum off time.
Check the performance of the time-delay relay. Energize the relay and manually time the delay until action.
Compare the measured time with the specification. Replace or adjust the relay if it is out of spec.

Battelle Northwest, 2003

Page 80

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

2.2.3 Diagnose CT Based on Approach

Ambient wb
Temp
2.2.3.2
Calculate
CT Approach

CT
Approach

CT
Sump Temp

CT Fans "On"
Setpoint

2.2.3.1
Evaluate
Filtered CT
Approach vs.
Filtered Ambient
wb Temp

CT Fans
Status

CT Approach
OK/Not
Rejected CT Approach and
Ambient wb Temp Points
for CT Fans Status Off and/or for
CT Sump Temp Below
the CT Fans "On" Setpoint

Rejected CT Approach and
Ambient wb Temp
When Condenser Pumps are "Off"

Condenser
Pumps Status
Battelle Northwest, 2003

Page 81

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

2.2.3.1 Evaluate Filtered CT Approach vs.
Filtered Ambient wb Temp

2.2.3.1.3
Determine
Benchmark CT
Approach (or
specification)

CT Approach
Benchmark

CT
Approach
Ambient wb
Temp

Condenser
Pumps Status

2.2.3.1.1
Filter CT
Approach and
Ambient wb
Temp for
Condensor
Pumps "On"

CT Fans "On"
Setpoint

CT Approach
Benchmark
CT
Sump Temp

Passed (Filtered)
CT Approach

Passed (Filtered)
Ambient wb Temp

CT
Fans Status
2.2.3.1.2
Evaluate CT
Approach

Rejected CT Approach and
Ambient wb Temp
When Condenser Pumps are "Off"

CT Approach
OK/Not
Rejected CT Approach and
Ambient wb Temp Points
for CT Fans Status Off and/or for
CT Sump Temp Below
the CT Fans "On" Setpoint

Battelle Northwest, 2003

Page 82

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

2.2.3.1.1 Filter CT Approach and Ambient wb Temp
for Condensor Pumps "On"

For each triplet of (Condenser Pumps Status, CT Approach, and Ambient wb
Temperature)
reject (i.e., filter out) those triplets for which Condenser Pumps Status = off.
pass those triplets for which Condenser Pumps Status = on.

Battelle Northwest, 2003

Page 83

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

2.2.3.1.2 Evaluate CT Approach Behavior

CT Fans
Status

CT Sump
Temp

CT Fans "On"
Setpoint

2.2.3.1.2.1
Filter for Fans
On and Sump
Temp
Setpoint

Plot of Passed CT Approach and
Ambient wb Temp Points
for CT Fans Status On and for
Sump Temp Above its Setpoint

Plot of Passed CT
Approach vs. Passed
Ambient wb Temp

Rejected CT Approach and
Ambient wb Temp Points
for CT Fans Status Off and /or for
Sump Temp Below the CT Fans "On" Setpoint

CT Approach
Benchmark

2.2.3.1.2.2
Check
Approach

CT Approach
OK/Not

Battelle Northwest, 2003

Page 84

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

2.2.3.1.2.1 Filter for Fans "On" and Sump Temp Setpoint
For each point on the Plot of filtered CT Approach vs. Filtered Ambient wb Temp,
reject it
if the CT Fans Status is "off" or
if the Sump Temperature < CT Fans "on" setpoint
otherwise, accept it (pass it).

Ref: 2.4 approach diagnostics discussion.doc

Battelle Northwest, 2003

Page 85

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

2.2.3.1.2.2 Check Approach
Compare values of CT Approach to the CT Approach Benchmark.
If CT Approach is <= CT Approach Benchmark, then set CT Approach OK/Not = "OK"
If CT Approach is > CT Approach Benchmark, then there is a problem (not OK) with CT heat rejection. Set CT
Approach OK/Not = "Not OK. There is a problem with heat rejection from the cooling tower."
Possible causes of heat rejection degradation (i.e., CT Approach OK/Not = Not OK):
Cooling tower media fouled due to mineral deposits or ambient dirt/dust/etc. Need to inpsect.
Restricted airflow for other reasons (e.g., piece of cardboard stuck over part of cooling tower air
inlet)
Condenser pump fouling, pipe fouling, or other restrictions on the water side.

Ref. File: 2.4 Approach diagnostics discussion.doc

Battelle Northwest, 2003

Page 86

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

2.2.3.1.3 Determine Benchmark CT Approach

CT Approach Benchmark is a user input (in the current process; see note below).

Battelle Northwest, 2003

Page 87

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

2.2.3.2 Calculate CT Approach

For each pair of values of Sump Temperature and Ambient wb Temperature
corresponding to the same time, calculate the CT Approach using
CT Approach = Sump Temp - Ambient Wet Bulb Temp

Note: Approach is not "controlled" - it is the difference between the sump temperature,
which IS controlled, and the ambient wb temperature, which is NOT controlled.

Ref: 2.4 approach diagnostics.doc

Battelle Northwest, 2003

Page 88

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

2.3 Diagnose Cooling Tower Capacity
CT Range
OK/Not

CT Range
Benchmark

Rejected Ambient wb
Temp Points for CT Fans Status
Off and/or for Sump Temp Below
the CT Fans "On" Setpoint

Ambient wb
Temp
CT Fans
Status

CT
Inlet Temperature
2.3.2
Diagnose CT
Range

CT
Sump
Temp

Rejected CT Range
When Condenser
Pumps are "Off"

Condenser Pumps
Status

CT Fans "Off"
Setpoint (Minimum
Sump Temp Setpoint)

2.3.1
Diagnose CT
Fans
Staging

CT Fans
Staging
OK/Not

Rejected CT Range for
for CT Fans Status Off and/or
Sump Temp Below the
CT Fans "On" Setpoint

Rejected CT
Fans Current When
Condenser Pumps are "Off"

Rejected Ambient wb
Temp When Condenser
Pumps are "Off"

CT Fans "On"
Setpoint (maximum
Sump Temp
Setpoint)

Rejected CT
Sump Temp When
Condenser Pumps are "Off"

Battelle Northwest, 2003

Page 89

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

2.3.1 Diagnose CT Fans Staging
CT Fans
Status

CT Sump
Temp

2.3.1.1
Filter CT Fans
Current and
Sump Temp
for Condenser
Pumps "On"

Condenser Pumps
Status

Passed (Filtered) CT
Sump Temp
Passed (Filtered) CT
Fans Status

Rejected CT
Fans Current When
Condenser Pumps are "Off"

Rejected CT Sump Temp When
Condenser Pumps are "Off"

CT Fans "Off"
Setpoint (Minimum
Sump Temp Setpoint)

2.3.1.2
Evaluate Filtered
CT Fans Current
(or Power) vs.
Filtered Sump
Temp Plot

CT Fans "On"
Setpoint (Maximum
Sump Temp Setpoint)

CT Fans Staging OK/Not

Battelle Northwest, 2003

Page 90

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

2.3.1.1 Filter CT Fans Current and
Sump Temp for CT Pumps "On"
For each triplet of (Condenser Pumps Status, CT Fans Status, and CT Sump Temperature)
reject (i.e., filter out) those triplets for which Condenser Pumps Status = off.
pass those triplets for which Condenser Pumps status = on.

Battelle Northwest, 2003

Page 91

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

2.3.1.2 Evaluate Filtered CT Fans
Current (or Power) vs. Filtered Sump
Temp Plot
Compare Sump Temperature to the CT Fans "On" Setpoint (maximum Sump Temperature Setpoint).
If Tsump < CT Fans "On" Setpoint, then set Fans Staging OK/Not = "OK (as far as we can tell)"
If Tsump > CT Fans "On" Setpoint, and CT Fans Status = "On" for all CT fans, then set Fans Staging OK/Not =
"OK."
If Tsump > CT Fans "On" Setpoint and CT Fans Status ≠ "On" for all CT fans (i.e., all CT fans are not on), set
Fans Staging OK/Not = "not OK. There is a fan staging problem and the cooling tower is not maintaining
the Sump Temp as low as it could/should."
Compare Tsump to the CT Fans "Off" Setpoint (minimum Sump Temperature Setpoint).
If Tsump > CT Fans "Off" Setpoint, then set Fans Staging OK/Not = "OK (as far as we can tell)."
If Tsump < CT Fans "Off" Setpoint, and if CT Fans Status = "Off" for all CT Fans (i.e., all CT fans are off), then
set Fans Staging OK/Not = "OK."
If Tsump < CT Fans "Off" Setpoint, and If any CT Fans Status = "On" (i.e., any CT fan is "on"), then set Fans
Staging OK/Not = "Not OK. There is a fan staging problem and energy is being wasted. All CT Fans
should be off."

Note:
The minimum and maximum sump temp setpoints are currently specified as inputs. A procedure could be developed
to derive them from performance data. This would reduce the number of user inputs required.
Note: A process for checking the individual fan stages has not been specified here. it would need to be added. See
Behavior 3 in the reference file.

Tsump = Sump Temp
Tsump maximum setpoint = maximum Sump Temperature setpoint
Tsump minimum setpoint = minimum Sump Temperature setpoint
Ref. File: 3.3 fan staging diagnostic.doc

Battelle Northwest, 2003

Page 92

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

2.3.2 Diagnose CT Range
CT Inlet
Temperature

CT Sump
Temp

CT Range
Benchmark

CT Fans "On"
CT Fans
Setpoint
Status
2.3.2.3
Calculate
CT Range

CT
Range

Ambient
wb Temp

Passed Ambient wb Temp
Points for Condenser Pumps On, CT
Fans Status On, and Sump Temp
Above the CT Fans "On" Setpoint
2.3.2.1
Filter CT Range
and Ambient
wb Temp

Condenser Pumps
Status

Passed CT Range for
Condenser Pumps On,
CT Fans Status On, and
Sump Temp Above the
CT Fans "On" Setpoint
Passed (Filtered) CT
Range

Rejected Ambient
wb Temp When
Condenser Pumps are "Off"
Rejected CT Range
When Condenser
Pumps are "Off"

Passed (Filtered)
Ambient
wb Temp
Rejected Ambient wb Temp
Points for CT Fans Status off
and/or for Sump Temp Below
the CT Fans "On" Setpoint

Rejected CT Range for
CT Fans Status Off and/or
Sump Temp Below the
CT Fans "On" Setpoint

Battelle Northwest, 2003

Page 93

2.3.2.2
Evaluate CT
Range Behavior

CT Range
OK/Not

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

2.3.2.1 Filter CT Range and Ambient wb
Temp
Passed Ambient wb Temp
CT Fans
Points
for
Condenser Pumps On, CT Fans
Status
Status
On,
and Sump Temp Above the
CT Fans "On"
CT
Fans "On" Setpoint
Setpoint
CT Sump Temp

Passed CT Range for
Condenser Pumps On,
CT Fans Status On, and
Sump Temp Above the
CT Fans "On" Setpoint

2.3.2.1.2
Filter for Fans
On and Sump
Temp Above
its Setpoint
Passed (Filtered) CT
Range

CT
Range
Ambient
wb Temp

Passed (Filtered)
Ambient wb Temp

Rejected CT Range for
CT Fans Status Off and/or
Sump Temp Below the
CT Fans "On" Setpoint

2.3.2.1.1
Filter CT Range
and Ambient
wb Temp for
Condenser
Pumps "On"

Condenser Pumps
Status

Rejected Ambient wb Temp Points
for CT Fans Status Off and/or
for Sump Temp Below the CT
Fans "On" Setpoint

Rejected CT Range When
Condenser Pumps are "Off"

Rejected Ambient wb
Temp When
Condenser Pumps are "Off"

Battelle Northwest, 2003

Page 94

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

2.3.2.1.1 Filter CT Range and Ambient
wb Temp for Condenser Pumps "On"
For each triplet of (Condenser Pumps Status, CT Range, and Ambient wb Temperature)
reject (i.e., filter out) those triplets for which Condenser Pumps Status = off.
pass those triplets for which Condenser Pumps status = on.

Battelle Northwest, 2003

Page 95

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

2.3.2.1.2 Filter for Fans "On" and
Sump-Temp Setpoint

For each point on the Plot of filtered CT Range vs. Filtered Ambient wb Temp,
reject it
if the Fans Status is "off" or
if the Sump Temperature is below the CT Fans "On" Setpoint (Maximum Sump
Temperature Setpoint).
otherwise, accept it (pass it).

Battelle Northwest, 2003

Page 96

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

2.3.2.2 Evaluate CT Range Behavior
Compare values of CT Range to the Range Benchmark..
If CT Range is >= Range Benchmark, then set CT Range OK/Not= "OK"
If CT Range is < Range Benchmeark, then set CT Range OK/Not = "Not OK. There is a problem with CT heat
rejection and it is performing at less than expected capacity."

Possible heat rejection degradation causes:
Tower media fouling due to mineral deposits or ambient dirt/dust/etc.
Restricted airflow
Condenser pump fouling, again, pipe fouling, restrictions
Tower to small for load (design problem)

Ref. File: 3.2.3 Range diagnostics discussion.doc

Battelle Northwest, 2003

Page 97

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

2.3.2.3 Calculate CT Range
For each time increment (and pair of necessary temperature values), calculate the CT
Range, using the formula
CT Range = CT Sump Temperature - CT Inlet Temperature.

Battelle Northwest, 2003

Page 98

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

3.0 Determine Equipment Status
CHW Transient
Decrease Factor
Compressor
Current (or Power)
Compressor Motor
Rated Current
(or Power)

CHWST

CHW Set
Point

3.1
Determine
Compressor
Status and
State

Compressor
Status
Compressor
State
Condenser-Pumps
Motor Rated
Current (or Power)

Compressor P
CHW Pumps
Motor Rated
Current (or Power)

3.2
Determine
Condenser
Pumps
Status

Condenser Pumps
Status

Condenser
Pumps P
3.3
Determine
CHW
Pumps
Status

Secondary
CHW Pumps
CHW Pumps
Motor Rated
Status
Current (or Power)

CHW Pumps
Current (or Power)
CHW
Pumps P

CT Fan
Motors
Rated current
(or Power)

Condenser Pumps
Current (or Power)

CT Fans P
CT Fans
Current (or Power)

Secondary CHW
Pumps
Status

Secondary CHW
Pumps P
Secondary CHW Pumps
Current (or Power)

CT Fans
Status
3.5
Determine
CT Fans
Status

3.4
Determine
Secondary
CHW Pumps
Status

Condenser Fan
Motors
Rated current
(or Power)

3.6
Determine
Condenser
Fans Status

Condenser Fans
Status

Supply Fan
Motors
Rated current
(or Power)
Supply
Fans P

Supply
Fans
Current (or Power)

Condenser
Fans P
Condenser
Fans
Current (or Power)

Battelle Northwest, 2003

3.7
Determine
Supply
Fans Status

Page 99

Supply
Fans
Status

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

3.1 Determine Compressor Status and State
Compressor Motor
Rated Current (or Power)

Compressor P

3.1.1
Set
Compressor
"On"
Threshold"

CHWST
Compressor
Current (or Power)

Compressor "On"
Threshold
CHW Transient
Decrease Factor

3.1.2
Assess
Compressor
Status and
State

Compressor
Status

Compressor
State

CHW Setpoint
3.1.3
Calculate the
Minimum
Transient
Decrease in
CHWST

Battelle Northwest, 2003

Compressor
Status

CHWST
Last
Minimum Transient
Decrease in CHWST

Page 100

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.1.1 Set Compressor "On" Threshold
Calculate the Compressor "On" Threshold using
Compressor "On" Threshold = Compressor P x Compressor Motor Rated Current (or Power)

Notes:
The chiller is "on" when the compressor is "on;" therefore, the chiller status can be determined by
evaluating the compressor on/off status. As the result, the Chiller "On" Threshold is set by setting the
Compressor "On" threshold.
The Compressor "On" Threshold is calculated from input power rating of the compressor motor.
Compressor P has values that range from 10 to 50% -- this can be a user input.

Ref file: 2.1CHW temperature control.doc

Battelle Northwest, 2003

Page 101

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.1.2 Assess Compressor Status and State
For each value of Compressor Current (or Power),
compare Compressor Current (or Power) to the Compressor "On" Threshold.
If the value of Compressor Current (or Power) <= Compressor "On" Threshold, then set Compressor
Status = "Off" and set Compressor State = "Off"
If the value of Compressor Current (or Power) > Compressor "On" Threshold, then set Compressor
Status = "on."
If Compressor Status = "On", then evaluate Compressor State as follows:
Update the value of Last Compressor State, using
Last Compressor State = Compressor State.
Determine and assign the new value of Compressor State for the current time
Check if the compressor is already in steady state
If Last Compressor State = Steady,
then set Compressor State = "Steady"
If Compressor Status = "On" and the Last Compressor State = "Transient", then
Calculate Drop in CHW Supply Temperature using
Drop in CHWST = CHWST Last - CHWST
Compare Drop in CHW Supply Temperature to the Minimum Transient Decrease in CHWST.
If Drop in CHWST > Minimum Transient Decrease in CHWST, then set Compressor
State = "Transient".
If Drop in CHWST <= Minimum Transient Decrease in CHWST, then set Compressor
State = "Steady"
Update CHWST Last
CHWST Last = CHWST

Note: Compressor Status = Chiller Status

Battelle Northwest, 2003

Page 102

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.1.3 Calculate the
Minimum Transient Decrease in CHWST
Calculate the Minimum Transient Decrease in CHWST using the relation:
Minimum Transient Decrease in CHWST = CHW Transient Decrease Factor * (CHWST at
Last Time Off - CHWST Setpoint)
Set new value of CHWST at Last Time Off,
If Compressor Status = "Off" and Last Compressor Status = "Off", then
set CHWST at Last Time Off = CHWST
If Compressor Status = "On" and Last Compressor Status = "Off", then
set CHWST at Last Time Off = CHWST Last
If Compressor Status = "On" and Last Compressor Status = "On" then
set CHWST at Last Time Off = CHWST at Last Off Time (i.e., not change).
Update Last Compressor Status
Last Compressor Status = Compressor Status*
*This over-writes the previous compressor status with the current status and should not be performed if
the previous status is required in subsequent processing.

Battelle Northwest, 2003

Page 103

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.2 Determine Condenser Pumps Status

Condenser-Pumps Motor
Rated Current (or Power)

3.2.1
Set
Condenser
Pumps"On"
Threshold"
Condenser
Pumps P

Condenser Pumps
Condenser Pumps
"On" Threshold
Current (or Power)

3.2.2
Assess
Condenser
Pumps
Status

Condenser Pumps
Status
Battelle Northwest, 2003

Page 104

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.2.1 Set Condenser Pumps"On" Threshold"
Calculate the Condenser Pumps "On" Threshold using
Condenser Pumps "On" Threshold = Condenser Pumps P x Condenser Pump Motors Rated
Current (or Power)

Notes:
Condenser Pumps P has values that range from 10 to 50% -- this can be a user input.

Battelle Northwest, 2003

Page 105

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.2.2 Assess Condenser Pumps
Status

For each value of Condenser Pumps Current (or Power),
compare Condenser Pumps Current (or Power) to the Condenser Pumps "On" Threshold.
If the value of Condenser Pumps Current (or Power) <= Condenser Pumps "On" Threshold, then set
Condenser Pumps Status = "Off."
If the value of Condenser Pumps Current (or Power) > Condenser Pumps "On" Threshold, then set
Condenser Pumps Status = "On."

Battelle Northwest, 2003

Page 106

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

3.3 Determine CHW Pumps Status

CHW Pumps Motor
Rated Current (or Power)

3.3.1
Set CHW
Pumps "On"
Threshold"
CHW
Pumps P

CHW Pumps
Current (or Power)

CHW Pumps
"On" Threshold

Battelle Northwest, 2003

3.3.2
Assess
CHW Pumps
Status

Page 107

CHW Pumps
Status

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.3.1 Set CHW Pumps "On" Threshold"
Calculate the CHW Pumps "On" Threshold using
CHW Pumps "On" Threshold = CHW Pumps P x CHW Pumps Motor Rated
Current (or Power)

Notes:
CHW Pumps P has values that range from 10 to 50% -- this can be a user input.

Battelle Northwest, 2003

Page 108

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.3.2 Assess CHW Pumps Status

For each value of CHW Pumps Current (or Power),
compare CHW Pumps Current (or Power) to the CHW Pumps "On" Threshold.
If the value of CHW Pumps Current (or Power) <= CHW Pumps "On" Threshold, then set
CHW Pumps Status = "off."
If the value of CHW Pumps Current (or Power) > CHW Pumps "On" Threshold, then set CHW
Pumps Status = "On."

Battelle Northwest, 2003

Page 109

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

3.4 Determine Secondary CHW Pumps Status

Secondary CHW Pumps Motor
Rated Current (or Power)

3.4.1
Set
Secondary
CHW Pumps
"On"
Threshold"
Secondary CHW
Pumps P

Secondary CHW Pumps
Current (or Power)

Secondary CHW
Pumps
"On" Threshold

Battelle Northwest, 2003

3.4.2
Assess
Secondary
CHW Pumps
Status

Page 110

Secondary CHW
Pumps
Status

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.4.1 Set Secondary CHW Pumps "On"
Threshold"
Calculate the Secondary CHW Pumps "On" Threshold using
Secondary CHW Pumps "On" Threshold = Secondary CHW Pumps P x Secondary CHW
Pumps Motors Rated Current (or Power)

Notes:
Secondary CHW Pumps P has values that range from 10 to 50% -- this can be a user input.

Battelle Northwest, 2003

Page 111

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.4.2 Assess Secondary CHW Pumps Status

For each value of Secondary CHW Pumps Current (or Power),
compare Secondary CHW Pumps Current (or Power) to the Secondary CHW Pumps "On" Threshold.
If the value of Secondary CHW Pumps Current (or Power) <= Secondary CHW Pumps "On"
Threshold, then set Secondary CHW Pumps Status = "off."
If the value of Secondary CHW Pumps Current (or Power) > Secondary CHW Pumps "On"
Threshold, then set Secondary CHW Pumps Status = "On."

Battelle Northwest, 2003

Page 112

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

3.5 Determine CT Fans Status

CT Fan Motors
Rated current (or Power)

CT Fans P

3.5.1
Set CT Fans
"On"
Threshold

CT Fans
Current (or Power)

CT Fans "On"
Threshold

Battelle Northwest, 2003

3.5.2
Assess
CT Fans
Status

Page 113

CT Fans
Status

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.5.1 Set CT Fans "On" Threshold
Calculate the CT Fans "On" Threshold using
CT Fans "On" Threshold = CT Fans P x CT Fan Motors Rated Current (or Power)

Notes:
CT Fans P has values that range from 10 to 50% -- this can be a user input.

Battelle Northwest, 2003

Page 114

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.5.2 Assess CT Fans Status

For each value of CT Fans Current (or Power),
compare CT Fans Current (or Power) to the CT Fans "On" Threshold.
If the value of CT Fans Current (or Power) <= CT Fans "On" Threshold, then set CT Fans Status
= "Off."
If the value of CT Fans Current (or Power) > CT Fans "On" Threshold, then set CT Fans Status
= "On."
Note:

Battelle Northwest, 2003

Page 115

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.6 Determine Condenser Fans Status

Condenser Fan Motors
Rated current (or Power)

Condenser Fans P

3.6.1
Set
Condenser
Fans "On"
Threshold

Condenser Fans "On"
Threshold

Battelle Northwest, 2003

Condenser Fans
Current (or Power)

3.6.2
Assess
Condenser
Fans
Status

Page 116

Condenser Fans
Status

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.6.1 Set Condenser Fans "On" Threshold
Calculate the Condenser Fans "On" Threshold using
Condenser Fans "On" Threshold = Condenser Fans P x Condenser Fan Motors Rated
Current (or Power)

Notes:
Condenser Fans P has values that range from 10 to 50% -- this can be a user input.

Battelle Northwest, 2003

Page 117

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.6.2 Assess Condenser Fans Status

For each value of Condenser Fans Current (or Power),
compare Condenser Fans Current (or Power) to the Condenser Fans "On" Threshold.
If the value of Condenser Fans Current (or Power) <= Condenser Fans "On" Threshold, then set
Condenser Fans Status = "Off."
If the value of Condenser Fans Current (or Power) > Condenser Fans "On" Threshold, then set
Condenser Fans Status = "On."
Note:

Battelle Northwest, 2003

Page 118

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.7 Determine Supply Fans Status

Supply Fan Motors
Rated current (or Power)

Supply Fans P

3.7.1
Set Supply
Fans "On"
Threshold

Supply Fans
Current (or Power)

Supply Fans "On"
Threshold

Battelle Northwest, 2003

3.7.2
Assess
Supply Fans
Status

Page 119

Supply Fans
Status

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.7.1 Set Supply Fans "On" Threshold
Calculate the Supply Fans "On" Threshold using
Supply Fans "On" Threshold = Supply Fans P x Supply Fan Motors Rated
Current (or Power)

Notes:
Supply Fans P has values that range from 10 to 50% -- this can be a user input.

Battelle Northwest, 2003

Page 120

Automated Diagnostics
Software Requirements Specification
Software Requirements Specification 1-1.DOC 8/29/2003

Version:
1.1
Date: 8/28/2003

3.7.2 Assess Supply Fans Status

For each value of Supply Fans Current (or Power),
compare Supply Fans Current (or Power) to the Supply Fans "On" Threshold.
If the value of Supply Fans Current (or Power) <= Supply Fans "On" Threshold, then set
Supply Fans Status = "Off."
If the value of Supply Fans Current (or Power) > Supplyr Fans "On" Threshold, then set
Supply Fans Status = "On."
Note:

Battelle Northwest, 2003

Page 121

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

5.

Appendix B: Chiller, Cooling Tower, and Chilled-Water Distribution Data
Dictionary

Battelle Northwest, 2003

Page 122

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

Variable
Ambient wb
Temperature

Definition
Ambient wet-bulb temperature of the outdoor
air. Equivalent to the Outdoor-Air Wet-Bulb
Temperature and Outdoor-Air Temperature
Wet-Bulb (OATWB)

Ambient Wet-Bulb
Temperature
(OATWB)

Wet-bulb temperature of the outdoor air.
Equivalent to Outdoor-Air Wet-Bulb
Temperature and Outdoor-Air Temperature
Wet Bulb (OATWB)

Ambient-Air
Temperature (OAT)

Equivalent to Outdoor-Air Temperature (OAT)
and is the dry -bulb temperature of the ambient
outdoor air.

Chiller "On"
Threshold

The value of Chiller Current (or Chiller Power)
above which the Chiller Status is considered
"On."

Chiller Condenser
Type
Chiller On/off Status

Chiller Schedule

Chiller Schedule
Ok/not

Chiller Status

Chiller System Type
Chiller/Compressor
Start-Up Time

The type of cooling for the chiller condenser. It
takes values of “Water cooled” or “Air cooled”
An indicator of whether the chiller is on or off.
Chiller on/off Status = Compressor on/off
Status.
Schedule of chiller on and off times during a
day. The schedule may vary based on day of
week, type of day (e.g., weekday vs. weekend
vs. holiday), or time of year. The schedule
does not take into account chiller cycling,
which may be caused by changes in load
during a scheduled "on" time period.
Indicator of whether the chiller is operating only
during scheduled times or not.

Values
Temperature in degrees F.

Temperature in degrees F.

Temperature in degrees F.

On.

Water cooled or air cooled.

On or off.

Absolute On/off times

Ok.
Not Ok. The chiller is
operating outside its
scheduled time.

Same as Chiller On/off Status. An indicator of
whether the chiller is on or off. Takes values of
"on" or "off." Chiller status = Compressor
status.
The type of chiller system. Chiller System
Estimated time over which the compressor
current/power spikes after the compressor is
turned from off to on. This could be estimated
manually and entered by the user or might be
derived automatically from compressor data in
a separate process (not yet specified in this
model).

Battelle Northwest, 2003

On or off.

Water cooled or air cooled.
Time difference in minutes.

Page 123

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

Variable
CHWdDown

CHWdUp

CHW Pumps
Collective Status

CHW Pumps Current
(or Power)
CHW Pumps Last
Time Turned On

CHW Pumps Max
Start-Up Time

CHW Pumps Motor
Rated Current (or
Power)
CHW Pumps P

CHW Set Point
CHWST

Definition
The maximum temperature increment below
the CHW Setpoint which when subtracted from
the CHW Setpoint results in the minimum
acceptably-controlled CHW Temperature.
The maximum temperature increment above
the CHW Setpoint which when added to the
CHW Setpoint results in the maximum
acceptably-controlled CHW Temperature.
The status of all the primary chilled water
pumps in an associated set taken as a single
unit. If at least one pump of the set is ON, the
collective status is ON. If all the pumps in the
set are OFF, the collective status is OFF.
Chilled Water Pumps Current (or Power). The
measured value of current (or power) for the
primary CHW pumps motor.
Chilled Water Pumps Last Time Turned On.
The time of the last measurement of CHW
Water Pumps Status at which the CHW Pumps
Status was "On" while the Preceding CHW
Pumps Status was "Off."
Chilled Water Pumps Max Start-Up Time. The
maximum time that the CHW Pumps should
turn on before the compressor turns on. This
can be set by default to 5 minutes.
Chilled Water Pumps Motor Rated Current (or
Power). Current (or power) rating of the
primary CHW Pumps motor from the motor
nameplate.
Chilled Water Pumps P. Fraction of Chilled
Water Pumps Motor Rated Current (or Power)
selected for the "On" Threshold.
Chilled Water Set Point. The set point for the
chilled water supply temperature.
Chilled Water Supply Temperature.
Temperature of the chilled water leaving the
chiller and entering the chilled water
distribution system at the current time.

Battelle Northwest, 2003

Values
Temperature difference in
degrees F.

Temperature difference in
degrees F.

On or Off.

Current in amps.

Absolute time in minutes.

Time in minutes.

Current in amps.

None.

Temperature in degrees F.

Temperature in degrees F.

Page 124

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

Variable
CHWST Alarm

CHWST Alarm
Evaluation Interval

CHWST Alarm
Trigger High

CHWST Alarm
Trigger Low

CHWST at Last Time
Off

CHWST Deviation
(Chilled Water
Supply Temperature
Deviation)

Definition
A variable indicating the current value of the
alarm for the chilled water supply temperature
deviations from set point. It takes values of
“Too High”, “Too Low”, and “OK”. It indicates
whether the CHW temperature is maintained
adequately over a designated minimum
number of time steps (CHWST Alarm Interval
High and CHWST Alarm Interval Low).
The number of time steps immediately
preceding the current time over which the
criterion for a CHWST alarm is evaluated. This
parameter takes integer values and is
adjustable to change the low-alarm sensitivity.
Its value may be specified as a set-up variable,
default value, or empirically adjustable.
The minimum fraction of values of the variable
CHWST Maintained OK/not that are equal to
"Too High", when evaluated over CHWST
Alarm Evaluation Interval time steps, for a high
alarm to be reported, i.e., for CHWST Alarm to
be set equal to “CHWST High.” This variable
takes values between 0.51 and 1.0 (i.e., 51%
and 100%). It may be a user set-up input, a
default value, or a empirically adjusted
sensitivity. The current process descriptions
assume that High and Low alarms cannot
occur simultaneously.
The minimum fraction of values of the variable
CHWST Maintained OK/not that are equal to
"Too Low", when evaluated over CHWST
Alarm Evaluation Interval time steps for an
alarm to be reported, i.e., for CHWST Alarm to
be set equal to “CHWST Low.” This variable
takes values between 0.51 and 1.0 (i.e., 51%
and 100%). It may be a user set-up input, a
default value, or a empirically adjusted
sensitivity.
Chilled Water Supply Temperature measured
the last time the compressor was off.

CHWST Deviation = CHW Temperature - CHW
Setpoint. The amount by which the actual
Chilled Water Supply Temperature deviates
from the chilled water set point at the present
time.

Battelle Northwest, 2003

Values
Too high, too low or Ok.

Number of time steps.

Real values between 0.51
and 1.00.

Real values between 0.51
and 1.00.

Temperature in degrees F.

Temperature difference in
degrees F.

Page 125

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

Variable
CHWSTFraction High

CHWSTFraction Low

CHWST Last

CHWST Lower
Bound

CHWST Maintained
OK/not (Chilled
Water Supply
Temperature
Maintained OK/not)
CHWST Maintained
OK/not Array

CHWST Mean TooHigh Deviation

CHWST Mean TooLow Deviation

CHWSTNumber High

Definition
CHWSTFraction High = CHWSTNumber
High/(CHWST Alarm Evaluation Interval). This
is the fraction of the total number of time steps
during the CHWST Alarm Evaluation Interval
that have “Too High” as the value for the
variable CHWST Maintained OK/not.
CHWSTFraction Low = CHWSTNumber
Low/(CHWST Alarm Evaluation Interval). This
is the fraction of the total number of times
steps during the CHWST Alarm Evaluation
Interval that have “Too Low” as the value for
the variable CHWST Maintained OK/not.
The value of the Chilled Water Supply
Temperature (CHWST) corresponding to the
last measurement time immediately preceding
the current measurement time.
Chilled Water Supply Temperature Lower
Bound = CHW Setpoint - (CHWdDown). It is
the minimum CHW temperature considered
acceptably controlled.
Chilled Water Supply Temperature Maintained
OK/not is a variable indicating whether the
CHW temperature is maintained adequately at
a specific point in time (i.e., time step). It takes
values of: "OK," "too high," and "too low."
The array: {CHWST Maintained OK/not,
CHWST Maintained OK/not (1 time step ago),
CHWST Maintained OK/not (2 time steps ago),
CHWST Maintained OK/not (3 time steps ago),
CHWST Maintained OK/not (4 time steps ago),
CHWST Maintained OK/not [(CHWST Alarm
Evaluation Interval – 1) time steps ago]}
Arithmetic mean value of the CHWST
Deviation for times included in the CHWST
Maintained OK/not Array for which CHWST
Maintained OK/not is “Too High”.
Arithmetic mean value of the CHWST
Deviation for times included in the CHWST
Maintained OK/not Array for which CHWST
Maintained OK/not is “Too Low”.
CHWSTNumber High is the number of values
of the variable CHWST Maintained OK/not with
values of “Too High” during the last CHWST
Alarm Evaluation Interval time steps.

Battelle Northwest, 2003

Values
Dimensionless real number
between 0.0 and 1.0.

Dimensionless real number
between 0.0 and 1.0.

Temperature in degrees F.

Temperature difference in
degrees F.

Ok, too high, or too low.

Array with individual elements
takings values of Ok or Not
OK.

Temperature in degrees F.

Temperature in degrees F.

Integer.

Page 126

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

Variable
CHWSTNumber Low

CHWST Upper
Bound

CHW Temperature
CHW Transient
Decrease Factor

Compressor "On"
Threshold

Compressor Current
(or Power)
Compressor
Interlocked With
CHW Pumps OK/not
Compressor
Interlock with
Condenser Fans
OK/Not
Compressor
Interlocked With
Condenser Pumps
OK/not
Compressor Motor
Rated Current (or
Power)
Compressor Off
Cycle OK/not

Definition
CHWSTNumber Low is the number of values
of the variable CHWST Maintained OK/not with
values of “Too Low” during the last CHWST
Alarm Evaluation Interval time steps.
Chilled Water Supply Temperature Upper
Bound = CHW Setpoint + (CHWdup). It is the
maximum CHW temperature considered
acceptably controlled.
Chilled Water Temperature. Same as Chilled
Water Supply Temperature.
Fraction of the difference between the Chilled
Water Supply Temperature (CHWST) at Last
Off Time and the CHWST Setpoint that is used
to determine the Minimum Transient Decrease
in CHWST. It takes values between 0 and 1.0
and may be a user (setup) input, a default
value, or a value determined empirically during
diagnosis (i.e. use of the diagnostic tool).
The value of Compressor Current (or
Compressor Power) above which the
Compressor is considered "on." Used to
determine if the chiller is "on."
The measured value of current (or power) at
the current time for the compressor motor.
An indicator of whether the compressor and
the CHW Pumps are properly interlocked or
not. It takes values of "OK" and "Not OK."
An indicator of whether the compressor and
the Condenser Fans are properly interlocked or
not. It takes values of "OK" and "Not OK."

An indicator of whether the compressor and
the Condenser Pumps are properly interlocked
or not. It takes values of "OK" and "Not OK."
Current (or power) rating of the compressor
motor from the motor nameplate.

An indicator of whether the compressor is
meeting the Minimum Compressor Off Time
while cycling between off and on. It takes
values of “OK” and “Not OK.”

Battelle Northwest, 2003

Values
Integer.

Temperature in degrees F.

Temperature in degrees F.
Dimensionless real number
between 0.0 and 1.0

Current in amps.

Current in amps.
OK
Not OK.
OK
Not OK.

OK
Not OK.

Current in amps.

OK
Not OK.

Page 127

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

Variable
Compressor On
Cycle OK/not

Compressor On/off
Status

Compressor P
Compressor State

Compressor Status

Condenser Fan
Motors Rated
Current (or Power)
Condenser Fans P

Condenser Fans
"On" Threshold

Condenser Fans
Current (or Power)
Condenser Fans
Status
Condenser Pumps P

Definition
An indicator of whether the compressor is
meeting the Minimum Compressor On Time
while cycling between on and off. It takes
values of “OK” and “Not OK.”
Same as Compressor status. An indicator of
whether the compressor is on or off. Takes
values of "on" or "off." Chiller on/off Status =
Compressor on/off Status.
Fraction of Compressor Motor Rated Current
(or Power) selected for the "On" Threshold
An indicator of whether the chiller is in an off, a
transient, or a steady state, where the
difference between steady and transient
operation is indicated by the rate of change of
the chilled water supply temperature (CHWST).
Takes values of “Off,” “Transient,” or “Steady.”
Same as Compressor On/off Status. An
indicator of whether the compressor (and,
therefore the chiller) is on or off. Takes values
of "on" or "off” as indicated by the Compressor
Current. Also indicates Chiller Status, i.e.,
Chiller Status = Compressor Status.

Values
OK
Not OK.

On or off.

Dimensionless real number
between 0.0 and 1.0.
Off, transient, or steady.

On or off.

Current (or power) rating of the condenser fan
motors from the motor nameplates.

Current in amps.

Fraction of Condenser Fan Motors Rated
Current (or Power) selected for the "On"
Threshold.

Dimensionless real number
between 0.0 and 1.0.

The value of Condenser Fans Current (or
Power) above which the condenser fans are
considered "on." Used to determine if the
condenser fans are "on."
For air-cooled condensers, the measured value
of current (or power) for the condenser fans
For air-cooled chillers, an indicator of whether
the condenser fans is (are) on or off. Takes
values of "on" or "off."
Fraction of Condenser Pump Motors Rated
Current (or Power) selected for the "On"
Threshold

Battelle Northwest, 2003

Current in amps.

Current in amps.
On or off.

Current in amps.

Page 128

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

Variable
Condenser Pumps
"On" Threshold

Definition
The value of Condenser Pumps Current (or
Power) above which the Condenser Pumps are
considered "on." Used to determine if the
condenser pumps are "on."

Condenser Pumps
Current (CPC)

The measured value of the electric current to
the chiller condenser pumps at the current
time.

Condenser Pumps
Current (CPC)

The measured value of the electric current to
the chiller condenser pumps at the current
time.

Values
Current in amps.

Current in amps.

Current in amps.

Condenser Pumps
Current (or Power)
Condenser Pumps
Last Time Turned On

Same as CPC.

Condenser Pumps
Max Start-Up Time

The maximum time that the condenser pumps
should turn on before the compressor turns on.
This can be set by default to 5 minutes.

Time in minutes.

Condenser Pumps
Status

Variable indicating whether the condenser
pumps are on or off

On or Off.

Condenser Type

Takes values of "water cooled" or "air cooled."

Water cooled or air cooled.

Condenser-Pumps
Motor Rated Current
(or Power)

Current (or power) rating of the condenser
pumps motor from the motor nameplate.

Current in amps.

CT Approach
Benchmark

An indicator of the maximum CT approach
acceptable for the cooling tower when
providing maximum cooling (i.e., when the
sump temperature is at or above the setpoint
and the fans running continuously). Assumed
to be available as a user input based on: 1)
the control specification or 2) the
manufacturer’s specification.

Temperature difference in
degrees F.

CT Cycling OK/Not

Variable that indicates whether the cycling of
the cooling tower fans is OK or not. If it cycles
too frequently, the fan motors may be
damaged reducing their lives.

OK or Not OK.

Current in amps.

The time of the last measurement of
Condenser Pumps Status at which the
Condenser Pumps Status was "On" while the
Preceding Condenser Pumps Status was "Off."

Battelle Northwest, 2003

Time in minutes.

Page 129

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

Variable
CT Fan Motors Rated
Current (or Power)

CT Fans Current (or
Power

CT Fans "On" Set
Point
CT Fans "On"
Threshold

CT Fans “Off” Set
Point
CT Fans P

CT Fans Staging
OK/Not

Definition
Cooling Tower Fan Motors Rated Current (or
Power). Current (or power) rating of the
cooling tower fan motors from the motor
nameplates.
Cooling Tower Fans Current (or Power). The
measured value of the electrical current (or
power) to the cooling tower fan motors at the
current time.
The cooling tower “on” set point = the value of
the sump temperature above which the cooling
tower fans are turned on.
Cooling Tower Fans "On" Threshold. The
value of Cooling Tower Fans Current (or
Power) above which the cooling tower fans are
considered "on." Used to determine if the
cooling tower fans are "on."
The cooling tower “off” set point = the value of
the sump temperature below which the cooling
tower fans are turned off.
Cooling Tower Fans P. Fraction of Cooling
Tower Fan Motors Rated Current (or Power)
selected for the "On" Threshold.
Variable indicating whether the fan staging is
Ok or not.

Values
Current in amps.

Amps.

Temperature in degrees F.

Current in amps.

Temperature in degrees F.

Current in amps.

"OK (as far as we can tell)."
"OK."
"Not OK. There is a fan
staging problem and the
cooling tower is not
maintaining the Sump Temp
as low as it could/should."
"Not OK. There is a fan
staging problem and energy
is being wasted. All CT Fans
should be off."

CT Fans Status

CT Fans/Condenser
Pumps Interlock

Cooling Tower Fans Status. For water cooled
chillers, a variable indicating whether the
cooling tower fans are on or off. Takes values
of "on" or "off."
An indicator of whether the cooling tower fans
and the condenser pumps are properly
interlocked or not.

On or Off.

OK or Not OK.

OK/Not

Battelle Northwest, 2003

Page 130

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

Variable
CT Inlet Temperature

CT Range

CT Range
Benchmark

CT Range OK/Not

CT Sump Temp
Setpoint
CT Sump
Temperature

Current Time

Definition
Temperature of the cooling water entering the
cooling tower. This temperature will be very
close to the temperature of the water leaving
the condenser of the chiller.
Cooling Tower Range = The difference
between the temperature of the water entering
the cooling tower (cooling tower inlet
temperature) and the temperature of the water
leaving the cooling tower (outlet temperature).
Benchmark for comparison of calculated
values of the CT range (may be a user input
based on the control spec, specified by the
manufacturer or determined by analysis of
operating data. TBD)
Variable indicating whether the CT range
calculated from measurements is equal or
greater than the expected range (given by the
CT Range Benchmark), in which case it is OK,
or whether it is less than expected, in which
case it is not OK because the cooling tower is
transferring less heat at maximum capacity
than expected.
The setpoint for the water in the cooling tower
sump, i.e., the temperature setpoint for the
water leaving the cooling tower.
The temperature of the cooling tower sump,
which is the same as the temperature of the
water leaving the cooling tower of the cooling
tower outlet temperature.
The time of the current time step

Identification of
Condition

This data flow represents the collection of all
output data from the diagnostic process(es),
which characterize the condition of the
equipment/systems undergoing diagnosis.
This term is only used on the chiller context
diagram. All other diagrams show individual
data flows.

Last Chilled Water
Pumps Status (Last
CHW Pumps Status)

The value of the CHW Pumps Status at the
measurement time immediately preceding the
current measurement time (i.e., at the last
measurement time).

Battelle Northwest, 2003

Values
Temperature in degrees F.

Temperature difference in
degrees F.

Degrees F.

OK or
Not OK. There is a problem
with CT heat rejection and it
is performing at less than
expected capacity.

Temperature in degrees F.

Temperature in degrees F.

Time in minutes.

On or Off

Page 131

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

Variable
Last Chiller Status

Last CHWST for
Compressor "On"
Time
Last Compressor Off
Interval

Last Compressor
Switch Off Time
Last Compressor On
Interval

Last Compressor
Switch On Time
Last Compressor
State

Last Compressor
Status

Last Condenser
Pumps Status

Last CT Fan Off
Interval

Definition
The value of Chiller Status at the measurement
time immediately preceding the current
measurement time (i.e., the last measurement
time). Last Chiller Status = Last Compressor
Status.
Chilled Water Supply Temperature
corresponding to the last measurement time
when the compressor was on immediately
preceding the current measurement time.
The length of time the compressor was off the
last time it was off. Last Compressor Off
Interval = Last Compressor Switch On Time –
Last Compressor Switch Off Time. Only
evaluated when the compressor is currently on.
The last time at which the Compressor turned
off, i.e., the last measurement time at which the
Compressor Status changed from “On” to “Off.”
The length of time the compressor was on the
last time it was on. Last Compressor On
Interval = Last Compressor Off Time – Last
Compressor On Time. Only evaluated when
the compressor is currently off.
The last time at which the Compressor turned
on, i.e., the last measurement time at which the
Compressor Status changed from “Off” to “On.”
The value of Compressor State at the
measurement time immediately preceding the
current measurement time (i.e., the last
measurement time).
The value of Compressor Status at the
measurement time immediately preceding the
current measurement time (i.e., the last
measurement time). Last Compressor Status =
Last Chiller Status.
The value of Condenser Pumps Status at the
measurement time immediately preceding the
current measurement time (i.e., the last
measurement time).
The length of time the CT fans were off the last
time they were off. Last CT Fan Off Interval =
Last CT Fans On Time – Last CT Fans Off
Time. Only evaluated when the compressor is
currently on.

Battelle Northwest, 2003

Values
On or Off

Temperature in degrees F.

Time difference in minutes.

Time in minutes.

Time difference in minutes.

Time in minutes.

Time in minutes.

Time in minutes.

Time in minutes.

Time difference in minutes.

Page 132

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

Variable

Definition

Last CT Fans Off
Time

The last time at which the CT Fans turned on,
i.e., the last measurement time at which the CT
fans status changed from “Off” to “On.”

Last CT Fans On
Time

The last time at which the CT Fans turned off,
i.e., the last measurement time at which the CT
fans status changed from “On” to “Off.”

Last CT Fans Status

The value of the CT fans status at the
measurement time immediately preceding the
current measurement time (i.e., at the last
measurement time).
The length of time the CT fans were on the last
time they were on. Last CT Fan On Interval =
Last CT Fans Off Time – Last CT Fans on
Time. Only evaluated when the compressor is
currently off.
The time at which measured (or metered) data
are collected.

Last Fans On Interval

Measurement Time
Metered Data

Values
Absolute time in minutes.

Absolute time in minutes.

On or Off.

Time difference in minutes.

Time in minutes.

The collection of all input data that is collected
periodically from sensors or observations.
Values of metered data are updated
periodically at the measurement frequency. It
can be contrasted with set-up data, which is
generally collected only once. Metered data is
generally used to characterize the condition (or
state) of the equipment and systems at a
particular point in time. This term is used only
on the chiller context diagram. All other
diagrams show individual data flows.

Min. CT Fans Off
Time

The minimum permissible time increment that
the cooling tower fans should be off before
being turned on again in order to prevent
damage to the fan motors during fan cycling,
as specified by the manufacturer.

Min. CT Fans On
Time

The minimum permissible time increment that
the cooling tower fans should be on before
being turned off again in order to prevent
damage to the fan motors during fan cycling,
as specified by the manufacturer.

Battelle Northwest, 2003

Time in minutes.

Time in minutes.

Page 133

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

Variable
Minimum
Compressor Off Time

Minimum
Compressor On Time

Minimum Transient
Decrease in CHWST

Definition
The minimum time specified by the
manufacturer (or other authority) that the
compressor should be off before being turned
back on again.
The minimum time specified by the
manufacturer (or other authority) that the
compressor should be on before being turned
back off again.
The minimum transient decrease in the chilled
water supply temperature. This is the
minimum change in chilled water supply
temperature between two sequential
measurement times that would be judged as
corresponding to a transient compressor state.
All values of the change in CHWST between
two successive measurement times would be
judged as corresponding to a steady state for
the compressor.

OAT Steady State
CHW

Outdoor-Air Temperature while the Chilled
Water Temperature is in a steady state, i.e.,
when Compressor State = Steady.

Outdoor-Air
Temperature (OAT)

Equivalent to Ambient-Air Temperature (OAT)
and is the dry -bulb temperature of the ambient
outdoor air.

Outdoor-Air
Temperature Wet
Bulb (OATWB)

Wet-bulb temperature of the outdoor air.
Equivalent to Ambient Wet-Bulb Temperature
and Outdoor-Air Wet-Bulb Temperature

Values
Time in minutes.

Time in minutes.

Temperature difference in F.

Temperature in degrees F.

Temperature in degrees F.

Temperature in degrees F.

Outdoor-Air WetBulb Temperature
(OATWB)

Wet-bulb temperature of the outdoor air.
Equivalent to Ambient Wet-Bulb Temperature
and Outdoor-Air Temperature Wet Bulb
(OATWB)

Passed (Filtered) CT
Approach

Values of the CT approach for times when the
condenser pumps status is “on”

Temperature difference in
degrees F

Passed (Filtered)
Ambient wb Temp

Values of the Ambient wb temperature for
times when the condenser pump status is “on”

Temperature in degrees F.

Passed (Filtered) CT
Sump Temp

Values of the sump temperature for times
when the condenser pumps are on.

Temperature in degrees F

Passed (Filtered) CT
Range

Values of the CT range for times when the
condenser pumps status is “on”

Temperature difference in
degrees F

Passed (Filtered) CT
Fans Current

Values of the Fans Current for times when the
condenser pumps are on.

Current in amps

Battelle Northwest, 2003

Temperature in degrees F.

Page 134

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

Variable
Passed (Filtered) CT
Fans Current

Passed (Filtered) CT
Fans Status

Passed Ambient wb
Temp Points for
Condenser Pumps
On,
CT Fans Status On,
and Sump Temp
Above the CT Fans
"On" Setpoint
Passed CT Range for
Condenser Pumps
On,
CT Fans Status On,
and
Sump Temp Above
the CT Fans "On"
Setpoint
Preceding
Condenser Pumps
Status
Rejected Ambient wb
Temp Points for CT
Fans Status Off
and/or for Sump
Temp Below the CT
Fans "On" Setpoint
Rejected Ambient wb
Temp When
Condenser Pumps
are "Off"
Rejected CHWST for
Non-Steady CHWST

Rejected CT
Approach and
Ambient wb Temp
When Condenser
Pumps are "Off"

Definition
Values of the CT Fans Current occurring when
the Condenser Pumps status is “on” (i.e.,
belong to triplets for which Condenser Pumps
Status = On).
Values of the CT Fans Status occurring when
the Condenser Pumps status is “on” (i.e.,
belong to triplets for which Condenser Pumps
Status = On).
Values of the ambient wb temperature for
times when the condenser pumps are on, the
CT fans status is on, and the sump
temperature is above its setpoint

Values of the CT Range for times when the
condenser pumps are on, the CT fans status is
on, and the sump temperature is above its
setpoint

The Condenser Pumps Status at the
measurement time immediately preceding the
measurement time to which reference is made.
Values of the ambient temperature that
correspond to times when the condenser
pumps are on and either or both the CT fans
status are off or the sump temperature is below
or equal to its setpoint.
Values of ambient wb temperature that
correspond to times when the condenser
pumps are off, which are filtered out
Rejected values of CHWST corresponding to
times when the Compressor State =
“Transient”, or Compressor State = “Off”, i.e.,
when the CHWST is not steady.

Values
Current in amps

On
Off
Temperature in degrees F.

Temperature difference in
degrees F

On or Off.

Temperature in degrees F

Temperature in degrees F

Temperature in degrees F.

Values of CT Approach and Ambient wb
Temperature that correspond to times when
the condenser pumps are off, which are filtered
out

Battelle Northwest, 2003

Page 135

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

Variable
Rejected CT
Approach and
Ambient wb Temp
Points for CT Fans
Status Off and/or for
Sump Temp Below
the CT Fans "On"
Setpoint
Rejected CT Fans
Current When
Condenser Pumps
are "Off"
Rejected CT Range
for CT Fans Status
Off and/or Sump
Temp Below the
CT Fans "On"
Setpoint
Rejected CT Range
When Condenser
Pumps are "Off"
Rejected CT Sump
Temp When
Condenser Pumps
are "Off"
Rejected OAT for
Non-Steady CHWST

Secondary CHW
Pumps Collective
Status

Secondary CHW
Pumps Motor Rated
Current (or Power)

Definition

Values

Values of the CT Approach and ambient
temperature that correspond to times when the
CT fans status is “off” and/or the sump
temperature is below the CT Fans “On” set
point.

Values of the CT Fans Current for times when
the condenser pumps are off.

Values of the CT Range that correspond to
times when the condenser pumps are on and
either or both the CT fans status is off or the
sump temperature is below or equal to its
setpoint.
Values of CT Range that correspond to times
when the condenser pumps are off, which are
filtered out
Values of the Sump Temperature at times
when the condenser pumps are off

Rejected values of OAT corresponding to times
when the Compressor State = “Transient” or
Compressor State = “Off”, i.e., when the
CHWST is not steady.
The status of all the secondary chilled water
pumps in an associated set taken as a single
unit. If at least one pump of the set is ON, the
collective status is ON. If all the pumps in the
set are OFF, the collective status is OFF.
Secondary Chilled Water Pumps Motor Rated
Current (or Power). Current (or power) rating
of the secondary CHW pump motor from the
motors nameplate(s).

Battelle Northwest, 2003

Current in amps

Temperature difference in
degrees F

Temperature difference in
degrees F
Temperature in degrees F

Temperature in degrees F.

On or Off.

Current in amps.

Page 136

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

Variable
Secondary CHW
Pumps "On"
Threshold

Secondary CHW
Pumps P

Secondary CHW
Pumps Current (or
Power)
Secondary/Primary
CHW Pumps
Interlock OK/not

Set-up Data

Sump Temp Control
OK/Not

Definition
The value of Secondary CHW Pumps Current
(or Power) above which the secondary CHW
Pumps is considered "on." Used to determine
if the secondary chilled water Pumps is (are)
"on."
Secondary Chilled Water Pumps P. Fraction of
Secondary Chilled Water Pumps Motors Rated
Current (or Power) selected for the "On"
Threshold.
The measured value of current (or power) for
the secondary CHW Pumps at the current time.
For chilled water distribution systems with
secondary CHW pumps. An indicator of
whether the primary CHW pumps and the
secondary CHW pumps served by it are
properly interlocked or not. It takes values of
"OK" and "Not OK."

Values
Current in amps.

Dimensionless real number
between 0.0 and 1.0.

Current in amps.

Ok.
Not Ok.

The collection of all input data that
characterizes the equipment and systems in
place in the building as well as its performance.
It is generally entered only once for a specific
building or specific piece of equipment and can
be contrasted with metered data which is
collected periodically. This term is used only on
the chiller context diagram. All other diagrams
show individual data flows.
A variable indicating whether the sump
temperature control is OK or not at the current
time

OK
Not OK. The CT fans are off
but should be on.
Not OK. The CT fans are on
but should be off.

Supply Fan Motors
Rated Current (or
Power)

Current (or power) rating of the supply fan
motors from the motor nameplates.

Current in amps.

Supply Fans Status

An indicator of whether the supply fans are on
or off. Takes values of "on" or "off."

On or off

Supply Fans "On"
Threshold

The value of Supply Fans Current (or Power)
above which the supply fans are considered
"on." Used to determine if the supply fans are
"on."

Current in amps.

Battelle Northwest, 2003

Page 137

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

Variable
Supply Fans Current
(or Power)
Supply Fans P

Definition

Values

The measured value of current (or power) for
the supply fans.

Current in amps.

Fraction of Supply Fan Motors Rated Current
(or Power) selected for the "On"

Dimensionless real number
between 0.0 and 1.0.

Threshold.
Supply
Fans/Secondary
CHW Pumps
Interlock OK/not

Supply Fans/CHW
Pumps Interlock
OK/not

Total Number of
Time Steps
Processed
Water side
Economizing

For chilled water distribution systems with
secondary pumps. An indicator of whether the
secondary CHW pumps and the supply fans for
the air handlers served by them are properly
interlocked or not. It takes values of "OK," "Not
OK," and "Possible problem with supply fan
control--check to see if loads in the spaces
served are being met."
An indicator of whether the primary CHW
pumps and the supply fans for the air handlers
served by them are properly interlocked or not.
It takes values of "OK," "Not OK," and
"Possible problem with supply fan control-check to see if loads in the spaces served are
being met"
The total number of time steps for which
processing has been performed since
processing was started and up to the current
time. It takes integer values.
Variable that indicates whether water side
economizing is used or not.

Ok.
Not Ok.
Not OK," and "Possible
problem with supply fan
control--check to see if loads
in the spaces served are
being met.
Ok.
Not Ok.
Possible problem with supply
fan control--check to see if
loads in the spaces served
are being met.
Integer.

Yes
No

Battelle Northwest, 2003

Page 138

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

6.

Appendix C: Data Flow Diagrams for Boiler Diagnostic Processes

Battelle Northwest, 2003

Page 139

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

Context Diagram Boiler

Setup
Data
(Static)

0.0
Diagnose
Boiler
Metered
Data

Identification
of
Condition

\

Battelle Northwest, 2003

Page 140

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

0.0 Diagnose Boiler

Boiler_Off_
Date_dUp
Boiler_Off_
Date_dDown
Boiler_Off_Date
Boiler_On_Date
dDown
Boiler_On_
Date_dUp

HW_Pump_Motor_
Rated_Current

Boiler_Shutoff_
OK/Not

6.0
Determine
Hot-Water
Pump State

1.0 Diagnose
Boiler
Shutoff
Boiler_
Schedule_Type

HW_Pump_
Status

Current_Date

HW_Pump_
Run_Limit

Boiler Fuel
Boiler_Capacity
Design_HWST
Boiler_Stage
_Power
Boiler_On_
Threshold_
Electric_P
HWST*

Current_time**

HW_Pump_
Current

Current_Time**

Boiler_On_Date

HW_Pump_P

Boiler_Status
4.0
Determine
Boiler State

Boiler_Last_
On_Time

Boiler_Last_
Boiler_NextTo_ Off_Time
Last_On_Time
Boiler_NextTo_
Last_Off_Time
3.0 Diagnose
Boiler Cycling

TimeStep
Min_Normal_Boiler_
On_Duration
Min_Normal_Boiler_
Off_Duration
Max_Normal_
Boiler_CPH

5.0
Diagnose
HW Pump
Shutoff

HW_Pump_
Shutoff_OK/Not

HWST_Too_
Low_Window
HWST_Too_
High_Window
FHWST_
HWST_SetpointHigh_Limit
Current
FHWST_
HWST*
2.0
Low_Limit
Diagnose
Hot Water
HWST_dDown
Temperature
Control
HWST_dUp
HWST_Maintained_OK/Not
HWST_Deviation
* HWST appears as an input twice on the diagram into
4.0 and into 2.0.

Boiler_Cycling_
OK/Not

Battelle Northwest, 2003

**Current_time appeasrs as an input twice on the
diagram, once as an input for 4.0 and 3.0 and once as
an niput into 5.0.

Page 141

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

1.0 Diagnose Boiler Shutoff
Boiler_Schedule_Type
1.1
Diagnose
Always-On
Boiler Shutoff

Boiler_On_Date
Boiler_Shutoff
OK/Not

Current_Date

Boiler_On_Date_dUp

Boiler_On_Date_
dDown
1.2
Diagnose
Manual-shutoff
Boiler Shutoff

Boiler_Off_Date
Boiler_Off_Date
dDown
Boiler_Off_Date
dUp

Boiler_Shutoff_OK/Not
Boiler_Status,

Note: No diagnosis is provided for Ambient-Temperature-Based or other temperature-based boiler shutoffs. Further
develelopment is required for these diagnostic procedures.
Battelle Northwest, 2003

Page 142

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

1.1 Diagnose Always-On-Boiler Shutoff

If Boiler_Schedule_Type = "Always On" AND Boiler_Status = "On"
Set Boiler_Shutoff_OK/Not = "OK. The boiler is on as it should be. Shutoff is not
applicable to this boiler. The boiler system is designed for continous
operation."
If Boiler_Schedule_Type = "Always On" AND Boiler_Status = "Off"
Set Boiler_Shutoff_OK/Not = "Not OK; the boiler is off and it should be on always,
unless it is locked out temporarily for maintenance or repair."

Battelle Northwest, 2003

Page 143

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

1.2 Diagnose Manual-shutoff-Boiler Shutoff
If Boiler_Schedule_Type = "Manual Shutoff" AND Boiler_Status = "On"
AND if Current_Date > Boiler_On_Date + Boiler_On_Date_dUp
Set Boiler_Shutoff_OK/Not = "OK; the boiler is on as it should be."
If Boiler_Schedule_Type = "Manual Shutoff" AND Boiler_Status = "Off"
AND if Current_Date > Boiler_On_Date + Boiler_On_Date_dUp
Set Boiler_Shutoff_OK/Not = "Not OK; the boiler is off when it should be on."
If Boiler_Schedule_Type = "Manual Shutoff" AND Boiler_Status = "On"
AND if Current_Date < Boiler_Off_Date - Boiler_Off_Date_dDown,
Set Boiler_Shutoff_OK/Not = "OK; the boiler is on as it should be."
If Boiler_Schedule_Type = "Manual Shutoff" AND Boiler_Status = "Off"
AND if Current_Date < Boiler_Off_Date - Boiler_Off_Date_dDown,
Set Boiler_Shutoff_OK/Not = "Not OK; the boiler is off when it should be on."
If Boiler_Schedule_Type = "Manual Shutoff" AND Boiler_Status = "Off"
AND If Current_Date < Boiler_On_Date - Boiler_On_Date_dDown,
AND If Current_Date > Boiler_Off_Date + Boiler_Off_Date_dUp,
Set Boiler_Shutoff_OK/Not = "OK; the boiler is off as it should be"
If Boiler_Schedule_Type = "Manual Shutoff"
AND If Current_Date > Boiler_On_Date - Boiler_On_Date_dDown,
AND If Current_Date < Boiler_On_Date + Boiler_On_Date_dUp,
Set Boiler_Shutoff_OK/Not = "Ok; the date is too close to the Boiler On Date to evaluate
compliance with the schedule."
If Boiler_Schedule_Type = "Manual Shutoff"
AND If Current_Date > Boiler_Off_Date - Boiler_Off_Date_dDown,
AND If Current_Date < Boiler_Off_Date + Boiler_Off_Date_dUp,
Set Boiler_Shutoff_OK/Not = "Ok; the date is too close to the Boiler Off Date to evaluate
compliance with the schedule."

Battelle Northwest, 2003

Page 144

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

2.0 Diagnose Hot Water Temperature Control

HWST_SetpointCurrent
HWST

HWST_dDown

HWST_dUp

2.1
Evaluate
Current Hot
Water
Temperature
Control

FHWST_
HWST_Too_
Low_Limit
Low_Window FHWST_
High_Limit
HWST_Too_
High_Window

HWST-SP_
Maintained_OK/Not

2.2
Evaluate LongTerm HWST
Control

HWST_Deviation

HWST_Maintained_OK/Not
Battelle Northwest, 2003

Page 145

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

2.1 Evaluate Current Hot Water Temperature
Calculate the upper bound for acceptable Hot Water Supply Temperature using
HWST Upper Bound = HWST_Setpoint-Current + HWST_dUp
Calculate the lower bound for acceptable Hot Water Supply Temperature using
HWST Lower Bound = HWST_Setpoint-Current - HWST_dDown
Compare the Hot Water Supply Temperature (HWST) to the HWST Upper Bound and HWST Lower Bound.
If HWST > HWST Upper Bound, then
Set HWST-SP_Maintained_OK/Not = "Too high" for the current time.
If HWST < HWST Lower Bound, then
Set HWST-SP_Maintained_OK/Not = "Too low" for the current time.
If HWST <= HWST Upper Bound, AND
HWST >= HWST Lower Bound, then
Set HWST_Maintained_OK/Not = "OK" for the current time.
Calculate the HWST Deviation for the current time
HWST_Deviation = HWST - HWST_Setpoint-Current.

Battelle Northwest, 2003

Page 146

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

2.2 Evaluate Long-Term HWST Control

HWST_Too_
Low_Window

HWST-SP_
Maintained_OK/Not

FHWST_
High_Limit

2.2.1
Update Hot
Water Temp
Low Alarm
Variables

FHWST_
Low_Limit

FHWST_Low

Time_Steps_
Processed

HWST_Too_
High_Window

2.2.3
Update Hot
Water Temp
High Alarm
Variables

Battelle Northwest, 2003

2.2.2
Evaluate HotWater
Temperature
Alarm
Conditions

FHWST_High
HWST_Maintained_OK/Not

Page 147

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

2.2.1 Update Hot Water Temp Low Alarm Variables
Update the Time_Steps_Processed, using
Time_Steps_Processed = Time_Steps_Processed + 1

Update the value of FHWST_Low based on the latest value of HWST_Maintained_OK/Not.
Update the HWST_Maintained_OK/not_Too-Low_Array
Update all values in the array, adding the current value of HWST_Maintained_OK/not to the
array and by dropping the oldest value of HWST_Maintained_OK/not from the array.
Update value for HWSTNumber_Low.
Set HWSTNumber_Low = number of values "Too Low" appearing in HWST_Maintained
OK/Not_Too-Low_Array.

If Total_Number_of_Time_Steps_Processed < HWST_Too_Low_Window, then
set HWSTNumber_Low = 0.

Calculate the new value of FHWST_Low.
FHWST_Low = HWSTNumber_Low/(HWST_Too_Low_Window)

Battelle Northwest, 2003

Page 148

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

2.2.2 Evaluate Hot-Water Temperature Alarm Conditions
Check if the long-term average hot-water supply tempeature (HWST) is
adequately maintained or whether it is high or low by comparing FHWST_High
and FHWST_Low with thir repective limits.

If FHWST_High >= FHWST_High_Limit,
Set HWST_Maintained_OK/Not = "Too high"
If FHWST_Low >= FHWST_Low_Limit,
Set HWST_Maintained_OK/Not = "Too low"
If FHWST_High < FHWST_HIgh_Limit, AND
FHWST_Low < FHWST_Low_Limit,
Set HWST_Maintained_OK/Not = "OK"

Battelle Northwest, 2003

Page 149

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

2.2.3 Update Hot Water Temp High Alarm Variables
Update the value of FHWST_High based on the latest value of HWST_Maintained_OK/Not.
Update the HWST_Maintained_OK/not_Too-High_Array
Update all values in the array, adding the current value of HWST_Maintained_OK/not to the
array and by dropping the oldest value of HWST_Maintained_OK/not from the array.
Update value for HWSTNumber_High.
Set HWSTNumber_High = number of values "Too High" appearing in HWST_Maintained_OK/
not_Too-High_Array.

If Total Number of Time Steps Processed < HWST_Too_High_Window, then
set HWSTNumber_High = 0.

Calcluate the new value of FHWST_High.
FHWST_High = HWSTNumber_High/(HWST_Too_High_Window)

Battelle Northwest, 2003

Page 150

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

3.0 Diagnose Boiler Cycling

3.2
Calculate On
and Off
Duration and
Cycles

Boiler_Last_On_Time
Boiler_Last_Off_Time
Boiler_NextTo_Last_On_Time

Latest_Complete_Boiler_
On_Duration

Latest_Complete_Boiler_
Off_Duration

Boiler_NextTo_Last_Off_Time
3.3
Diagnose
Boiler Cycling
Behavior

Boiler_Status

Current_time

3.4
Calcluate
boiler cycles
per hour

TimeStep

Boiler_Cycling
OK/Not

Boiler_Cycles_Past_Hour
Min_Normal_Boiler_
On_Duration

Max_Normal_Boiler_
CPH

Min_Normal_Boiler_
Off_Duration

Battelle Northwest, 2003

Page 151

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

3.2 Calculate On and Off Duration and Cycles

Calculate Latest_Complete_Boiler_On_Duration
If Boiler_Status = "On"
Set Latest_Complete_Boiler_On_Duration = Boiler_Last_Off_Time - Boiler_NextTo_Last_On_Time
If Boiler_Status = "Off"
Set Latest_Complete_Boiler_On_Duration = Boiler_Last_Off_Time - Boiler_Last_On_Time

Calculate Latest_Complete_Boiler_Off_Duration
If Boiler_Status = "Off"
Set Latest_Complete_Boiler_Off_Duration = Boiler_Last_On_Time - Boiler_NextTo_Last_Off_Time
If Boiler_Status = "On"
Set Latest_Complete_Boiler_Off_Duration = Boiler_Last_On_Time - Boiler_Last_Off_Time

Battelle Northwest, 2003

Page 152

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

3.3 Diagnose Boiler Cycling Behavior
If Boiler_Cycles_Past_Hour > Max_Normal_Boiler_CPH, AND
Latest_Complete_Boiler_On_Duration < Min_Normal_Boiler_On_Duration AND
Latest_Complete_Boiler_Off_Duration < Min_Normal_Boiler_Off_Duration,
then set Boiler_Cycling_OK/Not = "Not OK. The Boiler is cycling on and off
excessively."
If Boiler_Cycles_Past_Hour > Max_Normal_Boiler_CPH, AND
Latest_Complete_Boiler_On_Duration < Min_Normal_Boiler_On_Duration, AND
Latest_Complete_Boiler_Off_Duration >= Min_Normal_Boiler_Off_Duration,
then set Boiler_Cycling_OK/Not = "Not OK. The Boiler is cycling on excessively."
If Boiler Cycles Past Hour > Max_Normal_Boiler_CPH AND
Latest_Complete_Boiler_On_Duration >= Min_Normal_Boiler_On_Duration, AND
Latest_Complete_Boiler_Off_Duration < Min_Normal_Boiler_Off_Duration,
then set Boiler_Cycling_OK/Not = "Not OK. The Boiler is cycling off excessively."
If Boiler Cycles Past Hour <= Max_Normal_Boiler_CPH,
then set Boiler_Cycling_OK/Not = "OK."

Battelle Northwest, 2003

Page 153

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

3.4 Calcluate boiler cycles per hour
Set number of time steps in an hours
Set Nmax = 60/TimeStep
Update Boiler_Status_Array
Boiler_Status(Current_time - Nmax * TimeStep) = Boiler_Status[Current_time - (Nmax - 1) * TimeStep]
Boiler_Status[Current_time - (Nmax - 1) * TimeStep] = Boiler_Status[Current_time - (Nmax - 2) * TimeStep]
Ÿ
Ÿ
Ÿ
Boiler_Status(Current_time - 2 * TimeStep) = Boiler_Status(Current_time - TimeStep)
Boiler_Status(Current_time - TimeStep) = Boiler_Last_Status
Boiler_Status(Current_time) = Boiler_Status
Calculate Boiler_Cycles_Past_Hour.
Assign BSNumber(nt) for all values of nt from -Nmax to 0,
If Boiler_Status = "On," set BSNumber(nt) = 1.
If Boiler_Status = "Off," set BSNumber(nt) = 0.
Set Cycle_Counts = 0
Evaluate the following for each value of nt for -Nmax <= nt <= 0
(zero corresponding to the current time and -Nmax corresonding to Nmax time steps ago)
If Boiler_Status(Current_time) = "Off" AND BSNumber(nt+1) - BSNumber(nt) < 0
Set Cycle_Counts = Cycle_Counts + 1
If Boiler_Status(Current_time) = "Off" AND BSNumber(nt+1) - BSNumber(nt) >= 0
Set Cycle_Counts = Cycle_Counts
If Boiler_Status(Current_time) = "On" AND BSNumber(nt+1) - BSNumber(nt) > 0
Set Cycle_Counts = Cycle_Counts + 1
If Boiler_Status(Current_time) = "On" AND BSNumber(nt+1) - BSNumber(nt) <= 0
Set Cycle_Counts = Cycle_Counts
If nt < 0, repeat for next value of nt.
If nt = 0, Set Boiler_Cycles_Past_Hour = Cycle_Counts - 1
Note: We can probably specify more efficient ways to update the variables used in this cycle coutning procedure.

Battelle Northwest, 2003

Page 154

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

4.0 Determine Boiler State

Boiler_Fuel
Boiler_Capacity
Design_HWST

4.1
Determine
Boiler On
Threshold

Boiler_On_Threshold_Electric

Boiler_On_
Threshold_Fossil
Boiler_Status
4.2
Determine
Boiler Status

Boiler_On_Threshold_Electric_P
Boiler_Stage_Power

Boiler_Last_Status
HWST

Current_time

4.3
Determine
Boiler Last On
and Off Times

Boiler_Last_On_Time
Boiler_Last_Off_Time
Boiler_NextTo_
Last_On_Time

Boiler_NextTo_
Last_Off_Time

Battelle Northwest, 2003

Page 155

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

4.1 Determine Boiler On Threshold

Determine the Boiler Type and set corresponding Boiler "On" threshold.
If Boiler_Fuel = Electric, then
Set Boiler_On_Threshold_Electric = Boiler_On_Threshold_Electric_P *
Boiler_Capacity, and
Set Boiler_On_Threshold_Fossil = null
If the Boiler_Fuel = Fossil, then
Set Boiler_On_Threshold_Fossil = (Design_HWST + 75 )/2, and
Set Boiler_On_Threshold _Electric = null

Battelle Northwest, 2003

Page 156

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

4.2 Determine Boiler Status

Update Boiler_Last_Status,
Boiler_Last_Status = Boiler_Status

Check if the boiler on thresholds are exceeded. and set the boiler status accordingly.
If Boiler_Stage_Power > Boiler On Threshold Electric, then
set Boiler_Status = "On"
If HWST > Boiler On Threshold Fossil, then
set Boiler_Status = "On"
Otherwise,
If Boiler_Stage_Power <= Boiler On Threshold Electric,
Set Boiler_Status = "Off"
If HWST <= Boiler On Threshold Fossil,
Set Boiler_Status = "Off"

Battelle Northwest, 2003

Page 157

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

4.3 Determine Boiler Last On and Off Times
Calculate Boiler_Last_On_Time
If Boiler_Status = "On" and "Boiler_Last_Status = "Off," then
Set Boiler_NextTo_Last_On_Time = Boiler_Last_On_Time
Set Boiler_Last_On_Time = Current_Time
If Boiler_Status = "On" and "Boiler_Last_Status = "On," then
Set Boiler_Last_On_Time = Boiler_Last_On_Time
[Note: No change in value of Boiler_Last_On_Time.]
If Boiler_Status = "Off" and "Boiler_Last_Status = "Off," then
Set Boiler_Last_On_Time = Boiler_Last_On_Time
[Note: No change in value of Boiler_Last_On_Time.]
If Boiler_Status = "Off" and "Boiler_Last_Status = "On," then
Set Boiler_Last_On_Time = Boiler_Last_On_Time
[Note: No change in value of Boiler_Last_On_Time.]

Calculate Boiler_Last_Off_Time
If Boiler_Status = "Off" and "Boiler_Last_Status = "On," then
Set Boiler_NextTo_Last_Off_Time = Boiler_Last_Off_Time
Set Boiler_Last_Off_Time = Current_Time
If Boiler_Status = "Off" and "Boiler_Last_Status = "Off," then
Set Boiler_Last_Off_Time = Boiler_Last_Off_Time
[Note: No change in value of Boiler_Last_Off_Time.]
If Boiler_Status = "On" and "Boiler_Last_Status = "On," then
Set Boiler_Last_Off_Time = Boiler_Last_Off_Time
[Note: No change in value of Boiler_Last_Off_Time.]
If Boiler_Status = "On" and "Boiler_Last_Status = "Off," then
Set Boiler_Last_Off_Time = Boiler_Last_Off_Time
[Note: No change in value of Boiler_Last_Off_Time.]
Battelle Northwest, 2003

Page 158

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

5.0 Diagnose HW Pump Shutoff
If Boiler_Status = "Off" AND HW_Pump_Status = "Off"
Set HW_Pump_Shutoff_OK/Not = "OK; the hot-water pump is off as it should be."
If Boiler_Status = "On" AND HW_Pump_Status = "On"
Set HW_Pump_Shutoff_OK/Not = "OK; the hot-water pump is on while the boiler is on."
If Boiler_Schedule_Type = "Ambient Shutoff" OR "Manual Shutoff" AND
Boiler_Status = "Off" AND
HW_Pump_Status = "On" AND
Current_time - Boiler_Last_On_Time <= HW_Pump_Run_Limit, then
Set HW_Pump_Shutoff_OK/Not = "OK; the hot-water pump is running while the boiler is off, but
the hot-water run limit has not been exceeded yet."
If Boiler_Schedule_Type = "Ambient Shutoff" OR "Manual Shutoff" AND
Boiler_Status = "Off" AND
HW_Pump_Status = "On," AND
Current_time - Boiler_Last_On_Time > HW_Pump_Run_Limit, then
Set HW_Pump_Shutoff_OK/Not = "Not OK; the hot-water pump is running unnecessarily,
wasting energy, and unnecessarily reducing its remaining operating life."
Note: No diagnostics are provided for HW Pump off while boiler is on. This requires further
development. This situation can also present a safety problem so it is important from a safety standpoint
as well as efficient operation. Additional diagnostics are needed.

Battelle Northwest, 2003

Page 159

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

6.0 Determine Hot-Water Pump State

HW_Pump_Motor_Rated_Current

6.1
Set Hot Water
Pump On
Threshold

HW_Pump_On_Threshold

6.2
Determine
Hot-Water
Pump Status

HW_Pump_P

HW_Pump_Current

Battelle Northwest, 2003

Page 160

HW_Pump_Status

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

6.1 Set Hot Water Pump On Threshold
Calculate the HW_Pump_On_Threshold using
HW_Pump_On_Threshold = HW_Pump_P x HW_Pump_Motor_Rated_Current

Notes: The value of HW_Pump_P can be a user input or a default value.

Battelle Northwest, 2003

Page 161

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

6.2 Determine Hot-Water Pump Status
Update HW_Pump_Last_Status
Set HW_Pump_Last_Status = HW_Pump_Status

For each value of HW_Pump_Current, check if the HW_Pump_On_Threshold is exceeded, and set the
hot-water pump status accordingly.
If the value of HW_Pump_Current <= HW_Pump_On_Threshold, then
set HW_Pump_Status = "Off"
If the value of HW_Pump_Current > HW_Pump_On_Threshold, then
set HW_Pump_Status = "On."

Battelle Northwest, 2003

Page 162

Automated Diagnostics
Software Requirements Specification
<document identifier>

7.

Version:
1.1
Date: 8/28/2003

Appendix D: Data Dictionary for Boilers

aecdoe software requirements specification1-1pnnl14382.doc

Page 163 of 176

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>

Variable

Definition

Values

Boiler_Capacity

The cumulative rated capacity of
all boilers used for space
conditioning in Btu/h.
A variable that indicates the
number of complete boiler on/off
cycles that have occurred during
the hour immediately preceding
the current time.
Boiler cycling status variable,
which can take on values as
indicated in the process
description.

Capacity in Btu/h

Boiler_Cycles_Past_Hour

Boiler_Cycling OK/Not

Boiler_Fuel

Boiler_Last_Off_Time

Boiler_Last_On_Time

Boiler_Last_Status

Boiler_NextTo_Last_Off_Time

Boiler_NextTo_Last_On_Time

Boiler_Off_Date

A setup variable that indicates the
type of energy source used to fire
the boiler.
A variable identifying the absolute
time at which the boiler was last
shut “Off” (i.e., changed from on to
off).
A variable identifying the absolute
time at which the boiler was last
turned “On” (i.e., changed from off
to on).
The value of the Boiler_Status one
time step ago (i.e., the processing
time before the current time).
A variable identifying the absolute
at which the boiler was shut “Off”
two times ago (i.e., changed from
on to off).
A variable identifying the absolute
time at which the boiler was turned
“On” two times ago (i.e., changed
from off to on).
Numeric value for the day of the
year on which the boiler is
ordinarily turned off at the end of
the heating season with the days
of the year numbered
consecutively; e.g., April 1 is day
91 for a non-leap year.

aecdoe software requirements specification1-1pnnl14382.doc

Positive integer.

Ok.
"Not OK. The Boiler is
cycling on and off
excessively."
"Not OK. The Boiler is
cycling on excessively."
"Not OK. The Boiler is
cycling off excessively."
Electric or Fossil.

Time in minutes.

Time in minutes.

“On” or “Off”

Time in minutes.

Time in minutes.

Numerical value for day
of year.

Page 164 of 176

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>
Variable

Definition

Values

Boiler_Off_Date_dDown

The number of days before the
Boiler_Off_Date that the boiler
may be turned off without the
boiler operation considered to be
in error (i.e., it should be on).
The number of days beyond the
Boiler_Off_Date that the boiler
may be on before the boiler
operation is considered to be in
error (i.e., it should be off).
Numeric value for the day of the
year on which the boiler is
normally turned on for the heating
season with the days of the year
numbered consecutively; e.g.,
October 31 is day 304 for a nonleap year.
The number of days before the
Boiler_On_Date that the boiler
may be turned on without the
boiler operation considered to be
in error (i.e., it should be off).
The number of days beyond the
Boiler_On_Date that the boiler
may be off before the boiler
operation is considered to be in
error (i.e., it should be on).
The electric current threshold
above which an electric boiler is
considered “On.”
Fraction of Boiler_Capaciity
selected for the "On" Threshold for
electric boilers (e.g. 0.01)
The hot water supply temperature
above which a fossil fuel-fired
boiler is considered “On.”
An indicator of the type of boiler
schedule. It can take values of
“Ambient Shutoff,” “Manual
Shutoff,” and “Always On.”

Number of days

Boiler_Off_Date_dUp

Boiler_On_Date

Boiler_On_Date_dDown

Boiler_On_Date_dUp

Boiler_On_Threshold_Electric

Boiler_On_Threshold_Electric_P

Boiler_On_Threshold_Fossil

Boiler_Schedule_Type

aecdoe software requirements specification1-1pnnl14382.doc

Number of days

Numerical value for day
of year.

Number of days

Number of days

Electric current in amps
or null. Real.
Dimensionless real
number between 0.0 and
1.0 (e.g., 0.01)
Temperature in degrees
F or null. Real.
“Ambient Shutoff,”
“Manual Shutoff,” or
“Always On.”

Page 165 of 176

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>
Variable

Definition

Values

Boiler_Shutoff_OK/Not

A variable that indicates whether
shut off of the boiler is controlled
properly for and consistently with
the type of boiler.

"OK. The boiler is on as it
should be. Shutoff is not
applicable to this boiler.
The boiler system is
designed for continuous
operation."
"Not OK; the boiler is off
and it should be on
always, unless it is locked
out temporarily for
maintenance or repair."
"OK; the boiler is on as it
should be."
"OK; the boiler is off as it
should be"
"Not OK; the boiler is off
when it should be on."
"Not OK; the boiler is on
when it should be off."
"Ok; the date is too close
to the Boiler On Date to
evaluate compliance with
the schedule."
"Ok; the date is too close
to the Boiler Off Date to
evaluate compliance with
the schedule."

Boiler_Stage_Power

The electric power to the boiler
heating elements at the current
time. Does not include auxiliary
power such as valves and fans.
A variable indicating whether the
boiler is on or off.
Boiler_Status at the time (nt *
TimeStep). The variable nt takes
values less than or equal to zero.
A numerical indicator of the
Boiler_Status, where Boiler_Status
= “on” corresponds to BSNumber =
1, and Boiler_Status = “Off”
corresponds to BSNumber = 0.
A numerical indicator of the current
date corresponding to the current
processing time, counting from
January 1 of each year.
The absolute time of the current
time step.

Electric power in watts.
Real.

Boiler_Status
Boiler_Status(nt * TimeStep)

BSNumber

Current_Date

Current_Time

aecdoe software requirements specification1-1pnnl14382.doc

On or Off.
On or Off.

0 or 1

Date

Time in minutes.

Page 166 of 176

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>
Variable

Definition

Values

Cycle_Counts

An local variable used to keep
count of the number of complete
on/off cycles during a designated
time period.
Design hot-water supply
temperature.
Fraction of HWSTSP_Maintained_OK/Not equal to
"Too High" over the last
HWST_Too_High_Window
The fraction of “Too High” hot
water supply temperature
observations over the designated
time window for which the longterm HWST is judged too high.
Fraction of HWSTSP_Maintained_OK/Not equal to
"Too Low" over the last
HWST_Too_Low_Window.
The fraction of “Too Low” hot water
supply temperature observations
over the designated time window
for which the long-term HWST is
judged too low.
The measured value of current for
the hot-water pump
The value of hot-water pump
current (HW_Pump_Current)
above which the pump is
considered on.
The value of the
HW_Pump_Status one time step
ago (i.e., the processing time
before the current time).
Current rating of the hot-water
pump motor from the motor
nameplate.
Fraction of Hot-Water pump rated
current selected for the "On"
Threshold.
The maximum time interval after
the boiler turns off during which the
hot-water pump can run. After this
time, the hot-water pump should
not turn on again until the boiler
turns on.

Integer values.

Design_HWST
FHWST_High

FHWST_High_Limit

FHWST_Low

FHWST_Low_Limit

HW_Pump_Current
HW_Pump_On_Threshold

HW_Pump_Last_Status

HW_Pump_Motor_Rated_Current

HW_Pump_P

HW_Pump_Run_Limit

aecdoe software requirements specification1-1pnnl14382.doc

Temperature in degrees
F. Real.
Real value between 0.0
and 1.0.

Real value between 0.0
and 1.0.

Real value between 0.0
and 1.0.

Real value between 0.0
and 1.0.

Current in amps.
Current in amps.

“On” or “Off”

Current in amps.

Dimensionless real
number between 0.0 and
1.0.
Time interval in hours.

Page 167 of 176

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>
Variable

Definition

Values

HW_Pump_Shutoff_OK/Not

A variable indicator whether the
On/Off status of the hot-water
pump is being controlled properly
or not, and if not, how is it’s control
wrong.

HW_Pump_Status

A variable indicating whether the
hot-water pump is on or off.
Hot-water supply temperature

"OK; the hot-water pump
is off as it should be."
"OK; the hot water pump
is on while the boiler is
on."
"Hot Water Pumping
Fault; the pump is off too
much while the boiler is
on."
"HW Pump is running
unnecessarily and
wasting energy and
useful operating life."
"OK; the hot-water pump
is running while the boiler
is off, but the hot-water
run limit has not been
exceeded yet."
“On” or “Off”

HWST
HWST_dDown

HWST_Deviation

HWST_dUp

HWST_Maintained_OK/Not

Maximum acceptable deviation of
the hot-water supply temperature
below its set point for a single
measurement.
The hot water supply temperature
deviation from set point for the
current observation. [Note: This
output is included only for
consistency with the chilled water
reset diagnostic and may not be
needed.]
Maximum acceptable deviation of
the hot-water supply temperature
above its setpoint for a single
measurement.
Hot Water Supply Temperature
Status Message. Possible values:
“OK,” “Too high,” “Too Low.”

aecdoe software requirements specification1-1pnnl14382.doc

Temperature in degrees
F.
Temperature in degrees
F.

Temperature difference in
degrees F.

Temperature in degrees
F.

Ok.
Too high.
Too low.

Page 168 of 176

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>
Variable

Definition

Values

HWST_Maintained_OK/not_TooLow_ Array

The array:
{HWST_Maintained_OK/not,
HWST_Maintained_OK/not (1 time
step ago), HWST_Maintained
OK/not (2 time steps ago),
HWSTMaintained_OK/not (3 time
steps ago), HWST_MaintainedOK/not (4 time steps ago),
...HWST_Maintained_OK/not
[(HWST_Too_Low_Window – 1)
time steps ago]}
The array:
{HWST_Maintained_OK/not,
HWST_Maintained_OK/not (1 time
step ago), HWST_Maintained
OK/not (2 time steps ago),
HWSTMaintained_OK/not (3 time
steps ago), HWST_MaintainedOK/not (4 time steps ago),
.HWST_Maintained_OK/not
[(HWST_Too_High_Window – 1)
time steps ago]}
HWSTNumber High is the number
of values of the variable
HWST_Maintained_OK/not with
values of “Too High” during the last
HWST_Too_High_Window time
steps.
HWSTNumber Low is the number
of values of the variable
HWST_Maintained_OK/not with
values of “Too Low” during the last
HWST_Too_Low_Window time
steps.
Hot-water supply temperature
setpoint for the current time.
An indicator of whether the hotwater supply temperature is
adequately maintained at a single
point in time.
Length in number of observations
of the moving time window over
which the percentage of too high
hot water supply temperatures is
evaluated.
Length in number of observations
of the moving time window over
which the percentage of too low
hot water supply temperatures is
evaluated.

Array with individual
elements takings values
of Ok, Too High, or Too
Low.

HWST_Maintained_OK/not_TooHigh_ Array

HWSTNumber_High

HWSTNumber_Low

HWST_Setpoint-Current
HWST-SP_Maintained_OK/Not

HWST_Too_High_Window

HWST_Too_Low_Window

aecdoe software requirements specification1-1pnnl14382.doc

Array with individual
elements takings values
of Ok, Too High, or Too
Low.

Integer.

Integer.

Temperature in degrees
F.
OK
Too high
Too low
Number of time steps.
Integer

Number of time steps.
Integer

Page 169 of 176

Automated Diagnostics

Version:
1.1
Date: 8/28/2003

Software Requirements Specification
<document identifier>
Variable

Definition

Values

Latest_Complete_Boiler_Off_Durati
on

The length of time over which the
boiler was off the last time it went
through a complete off-cycle (i.e.,
from on to off to on again).
The length of time over which the
boiler was on the last time it went
through a complete on-cycle (i.e.,
from off to on to off again).
A setup variable for the maximum
number of cycles that the boiler
should go through in an hour.
A setup variable that indicates the
minimum time the boiler should be
off before turning on again.
A setup variable that indicates the
minimum time the boiler should be
on before shutting off
again.
Number of times steps per hour =
60/TimeStep = the rounded
number of calculation time steps
per hour given the length of the
time step designated during set up.
An index for the number of time
steps.
A setup variable for the length of
time between successive
processings in minutes (which is
assumed constant).
Total number of time steps
processed since the beginning of
processing.

Time interval in minutes.

Latest_Complete_Boiler_On_Durati
on

Max_Normal_Boiler_CPH

Min_Normal_Boiler_Off_Duration

Min_Normal_Boiler_On_Duration

Nmax

nt
TimeStep

Time_Steps_Processed

aecdoe software requirements specification1-1pnnl14382.doc

Time interval in minutes.

Positive integer.

Time interval in minutes.

Time interval in minutes.

Positive integer.

Integer, usually less than
or equal to zero.
Time increment in
minutes.

Integer.

Page 170 of 176

